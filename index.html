<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AC Milan 2024-2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            /* AC Milan Theme: Dark background */
            background-color: #121212; /* Very dark gray, almost black */
            color: #E0E0E0; /* Light gray for general text */
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 40vh;
        }
         /* Smaller chart container for GK stats in modal */
        .gk-chart-container {
            position: relative;
            width: 100%;
            max-width: 400px; /* Smaller max-width */
            margin-left: auto;
            margin-right: auto;
            height: 180px; /* Adjusted height */
            max-height: 25vh;
        }


        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
            .gk-chart-container {
                height: 200px; /* Adjusted height for md screens */
            }
        }

        .nav-link {
            transition: color 0.3s, border-color 0.3s;
        }

        /* AC Milan Theme: Active nav link */
        .nav-link.active {
            color: #E53935; /* AC Milan Red */
            border-bottom-color: #E53935; /* AC Milan Red */
        }

        .nav-link:not(.active) {
            border-bottom-color: transparent;
        }
        
        .nav-link:not(.active):hover {
            color: #F44336; /* Lighter red on hover */
        }


        .modal-backdrop {
            transition: opacity 0.3s ease-in-out;
        }

        .modal-content {
            transition: transform 0.3s ease-in-out;
        }

        .table-header-sortable {
            cursor: pointer;
        }
        /* AC Milan Theme: Table header hover */
        .table-header-sortable:hover {
            background-color: #333333; /* Darker gray for hover */
        }

        .table-row-clickable {
            cursor: pointer;
            transition: background-color 0.2s;
        }
        /* AC Milan Theme: Table row hover */
        .table-row-clickable:hover {
            background-color: #2a2a2a; /* Slightly lighter dark gray for hover */
        }

        .tournament-logo {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white; /* Text color on logos, ensure contrast */
            margin-right: 8px;
        }

        .serie-a-logo {
            background-color: #0055A4;
        }

        .champions-league-logo {
            background-color: #001E5A;
        }

        .coppa-italia-logo {
            background-color: #009246;
        }

        .supercoppa-logo {
            background-color: #CEB888; /* Gold, keep for contrast */
        }

        .timeline {
            list-style-type: none;
            padding-left: 0;
            position: relative;
        }
        /* AC Milan Theme: Timeline line */
        .timeline:before {
            content: '';
            background: #444444; /* Darker gray for timeline line */
            display: inline-block;
            position: absolute;
            left: 10px;
            width: 2px;
            height: 100%;
            z-index: 0;
        }

        .timeline-item {
            margin: 20px 0;
            padding-left: 40px;
            position: relative;
        }
        /* AC Milan Theme: Timeline item dot */
        .timeline-item:before {
            content: '';
            background: #121212; /* Match body background */
            border: 2px solid #E53935; /* AC Milan Red border */
            display: inline-block;
            position: absolute;
            border-radius: 50%;
            left: 0px;
            width: 24px;
            height: 24px;
            z-index: 1;
        }
        /* AC Milan Theme: Timeline item content */
        .timeline-item-content {
            background-color: #1E1E1E; /* Dark surface for content */
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /* Darker shadow */
        }

        .timeline-item-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: #E53935; /* AC Milan Red for titles */
        }

        /* Custom classes for AC Milan theme */
        .acm-bg-dark { background-color: #121212; } /* Main dark background */
        .acm-bg-surface { background-color: #1E1E1E; } /* Slightly lighter surface */
        .acm-bg-surface-header { background-color: #242424; } /* Slightly lighter surface for headers */
        .acm-text-light { color: #E0E0E0; } /* Primary light text */
        .acm-text-secondary { color: #A0A0A0; } /* Secondary, less prominent text */
        .acm-text-red { color: #E53935; } /* AC Milan Red text */
        .acm-border-red { border-color: #E53935; }
        .acm-border-dark { border-color: #333333; } /* Darker border */
        .acm-highlight-green { color: #4CAF50; } /* Keep green for positive highlights if needed */
        .acm-highlight-red-text { color: #F44336; } /* Brighter red for negative highlights */

        /* Adjustments for Tailwind overrides */
        .placeholder-acm::placeholder {
            color: #757575; /* Placeholder text color for dark inputs */
        }

    </style>
</head>

<body class="acm-bg-dark acm-text-light">

    <header class="acm-bg-surface-header/90 backdrop-blur-lg shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-3">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d0/Logo_of_AC_Milan.svg/200px-Logo_of_AC_Milan.svg.png"
                        alt="AC Milan Logo" class="h-8 w-8 rounded-full">
                    <h1 class="text-lg md:text-xl font-bold acm-text-light">Milan 2024-25</h1>
                </div>
                <div class="hidden md:flex items-center space-x-2 md:space-x-4">
                    <a href="#overview" data-target="overview"
                        class="nav-link text-sm md:text-base font-medium acm-text-secondary py-2 border-b-2">üìÑ
                        T·ªïng Quan</a>
                    <a href="#performance" data-target="performance"
                        class="nav-link text-sm md:text-base font-medium acm-text-secondary py-2 border-b-2">üìä
                        Th√†nh T√≠ch</a>
                    <a href="#off-pitch" data-target="off-pitch"
                        class="nav-link text-sm md:text-base font-medium acm-text-secondary py-2 border-b-2">üíº
                        T√†i Ch√≠nh & H·∫≠u Tr∆∞·ªùng</a>
                    <a href="#squad" data-target="squad"
                        class="nav-link text-sm md:text-base font-medium acm-text-secondary py-2 border-b-2">üë•
                        ƒê·ªôi H√¨nh</a>
                </div>
                <div class="md:hidden">
                    <select id="mobile-nav"
                        class="acm-bg-surface border acm-border-dark acm-text-light text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5 placeholder-acm">
                        <option value="overview">üìÑ T·ªïng Quan</option>
                        <option value="performance">üìä Th√†nh T√≠ch</option>
                        <option value="off-pitch">üíº T√†i Ch√≠nh & H·∫≠u Tr∆∞·ªùng</option>
                        <option value="squad">üë• ƒê·ªôi H√¨nh</option>
                    </select>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-8">

        <section id="overview" class="app-section space-y-8">
            <div>
                <h2 class="text-3xl font-bold acm-text-red flex items-center"><span class="mr-2 text-2xl">üìÑ</span>M√πa
                    Gi·∫£i C·ªßa Nh·ªØng Th√°i C·ª±c</h2>
                <p class="mt-2 text-lg acm-text-secondary">M√πa gi·∫£i 2024-2025 c·ªßa AC Milan l√† m·ªôt b·ª©c tranh ph·ª©c t·∫°p, n∆°i
                    vinh quang t·∫°i c√°c gi·∫£i ƒë·∫•u c√∫p kh√¥ng th·ªÉ che l·∫•p ƒëi n·ªói th·∫•t v·ªçng t·∫°i Serie A. B√°o c√°o n√†y ph√¢n
                    t√≠ch s√¢u v·ªÅ m·ªôt nƒÉm ƒë·∫ßy bi·∫øn ƒë·ªông c·ªßa Rossoneri, t·ª´ s√¢n c·ªè ƒë·∫øn ph√≤ng h·ªçp.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="acm-bg-surface p-5 rounded-xl shadow-lg">
                    <h3 class="font-semibold acm-text-secondary flex items-center">
                        <div class="tournament-logo serie-a-logo">SA</div>V·ªã tr√≠ Serie A
                    </h3>
                    <p class="text-4xl font-bold acm-highlight-red-text mt-2">H·∫°ng 8</p>
                    <p class="text-sm acm-text-secondary mt-1">Kh√¥ng ƒë·ªß ƒëi·ªÅu ki·ªán d·ª± c√∫p Ch√¢u √Çu</p>
                </div>
                <div class="acm-bg-surface p-5 rounded-xl shadow-lg">
                    <h3 class="font-semibold acm-text-secondary flex items-center">
                        <div class="tournament-logo supercoppa-logo">SI</div>Supercoppa Italiana
                    </h3>
                    <p class="text-4xl font-bold acm-highlight-green mt-2">V√¥ ƒê·ªãch</p>
                    <p class="text-sm acm-text-secondary mt-1">ƒê√°nh b·∫°i Inter Milan 3-2</p>
                </div>
                <div class="acm-bg-surface p-5 rounded-xl shadow-lg">
                    <h3 class="font-semibold acm-text-secondary">Vua Ph√° L∆∞·ªõi (M·ªçi ƒê·∫•u Tr∆∞·ªùng)</h3>
                    <p class="text-4xl font-bold acm-text-light mt-2">17</p>
                    <p class="text-sm acm-text-secondary mt-1">Christian Pulisic</p>
                </div>
                <div class="acm-bg-surface p-5 rounded-xl shadow-lg">
                    <h3 class="font-semibold acm-text-secondary">Gi√° Tr·ªã CLB (Forbes 2025)</h3>
                    <p class="text-4xl font-bold acm-text-light mt-2">$1.5 t·ª∑</p>
                    <p class="text-sm acm-highlight-green mt-1">‚ñ≤ 5% so v·ªõi nƒÉm tr∆∞·ªõc</p>
                </div>
            </div>

            <div class="acm-bg-surface p-6 rounded-xl shadow-lg">
                <h3 class="text-2xl font-bold acm-text-red mb-4">S·ª± T∆∞∆°ng Ph·∫£n C·ªßa M√πa Gi·∫£i</h3>
                <p class="mb-6 acm-text-secondary">Th√†nh c√¥ng ·ªü c√°c gi·∫£i ƒë·∫•u c√∫p m·ªôt tr·∫≠n v√† s·ª± b·∫•t ·ªïn trong cu·ªôc ƒëua ƒë∆∞·ªùng
                    d√†i ·ªü gi·∫£i VƒêQG ƒë√£ ƒë·ªãnh h√¨nh n√™n m·ªôt m√πa gi·∫£i kh√≥ ƒëo√°n c·ªßa Milan. ƒê·ªôi b√≥ng c√≥ th·ªÉ thi ƒë·∫•u thƒÉng hoa
                    trong c√°c tr·∫≠n ƒë·∫•u knock-out nh∆∞ng l·∫°i thi·∫øu ƒëi s·ª± nh·∫•t qu√°n c·∫ßn thi·∫øt ƒë·ªÉ c·∫°nh tranh cho Scudetto,
                    d·∫´n ƒë·∫øn s·ª± h·ª•t h·∫´ng l·ªõn cho ng∆∞·ªùi h√¢m m·ªô.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="border-l-4 border-green-500 pl-4">
                        <h4 class="font-bold text-xl acm-highlight-green">ƒêi·ªÉm S√°ng</h4>
                        <ul class="list-disc list-inside mt-2 space-y-1 acm-text-light">
                            <li>V√¥ ƒë·ªãch Supercoppa Italiana l·∫ßn th·ª© 8.</li>
                            <li>L·ªçt v√†o chung k·∫øt Coppa Italia.</li>
                            <li>Christian Pulisic v√† Tijjani Reijnders t·ªèa s√°ng.</li>
                            <li>Ti·∫øp t·ª•c trao c∆° h·ªôi cho c√°c t√†i nƒÉng tr·∫ª.</li>
                            <li>B·∫•t b·∫°i tr∆∞·ªõc Inter Milan ·ªü c√°c tr·∫≠n derby.</li>
                        </ul>
                    </div>
                    <div class="border-l-4 acm-border-red pl-4">
                        <h4 class="font-bold text-xl acm-highlight-red-text">N·ªói Th·∫•t V·ªçng</h4>
                        <ul class="list-disc list-inside mt-2 space-y-1 acm-text-light">
                            <li>Ch·ªâ k·∫øt th√∫c ·ªü v·ªã tr√≠ th·ª© 8 t·∫°i Serie A.</li>
                            <li>B·ªã lo·∫°i s·ªõm kh·ªèi Champions League.</li>
                            <li>Thua chung k·∫øt Coppa Italia tr∆∞·ªõc Bologna.</li>
                            <li>B·∫•t ·ªïn tr√™n bƒÉng gh·∫ø hu·∫•n luy·ªán.</li>
                        </ul>
                    </div>
                </div>
            </div>

        </section>

        <section id="performance" class="app-section space-y-8 hidden">
            <div>
                <h2 class="text-3xl font-bold acm-text-red flex items-center"><span
                        class="mr-2 text-2xl">üìä</span>Ph√¢n T√≠ch Th√†nh T√≠ch</h2>
                <p class="mt-2 text-lg acm-text-secondary">Kh√°m ph√° h√†nh tr√¨nh c·ªßa AC Milan qua b·ªën ƒë·∫•u tr∆∞·ªùng ch√≠nh trong
                    m√πa gi·∫£i 2024-2025: t·ª´ vinh quang c√∫p qu·ªëc n·ªôi ƒë·∫øn s·ª± sa s√∫t ·ªü gi·∫£i VƒêQG v√† ƒë·∫•u tr∆∞·ªùng ch√¢u √Çu.</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="acm-bg-surface p-6 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold acm-text-red mb-1 flex items-center">
                        <div class="tournament-logo serie-a-logo">SA</div>Serie A: M√πa Gi·∫£i ƒê·∫ßy Th·ª≠ Th√°ch
                    </h3>
                    <p class="acm-text-secondary mb-4">K·∫øt th√∫c ·ªü v·ªã tr√≠ th·ª© 8 v·ªõi 63 ƒëi·ªÉm l√† m·ªôt k·∫øt qu·∫£ ƒë√°ng th·∫•t v·ªçng,
                        cho th·∫•y s·ª± thi·∫øu ·ªïn ƒë·ªãnh nghi√™m tr·ªçng trong su·ªët 38 v√≤ng ƒë·∫•u.</p>
                    <div class="chart-container">
                        <canvas id="serieAChart"></canvas>
                    </div>
                </div>
                <div class="acm-bg-surface p-6 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold acm-text-red mb-4 flex items-center">
                        <div class="tournament-logo champions-league-logo">CL</div>Champions League: D·ª´ng B∆∞·ªõc S·ªõm
                    </h3>
                    <p class="acm-text-secondary mb-4">D√π ƒë√£ v∆∞·ª£t qua v√≤ng b·∫£ng, Milan ƒë√£ b·ªã Feyenoord lo·∫°i ·ªü v√≤ng play-off,
                        m·ªôt k·∫øt qu·∫£ d∆∞·ªõi k·ª≥ v·ªçng cho m·ªôt CLB gi√†u truy·ªÅn th·ªëng ch√¢u √Çu.</p>
                    <div class="flex flex-col space-y-4">
                        <div class="text-center p-4 bg-gray-800 rounded-lg">
                            <p class="font-semibold text-gray-400">Giai ƒëo·∫°n</p>
                            <p class="text-xl font-bold acm-text-light">V√≤ng Play-off ƒê·∫•u lo·∫°i tr·ª±c ti·∫øp</p>
                        </div>
                        <div class="text-center p-4 bg-red-900/30 rounded-lg">
                            <p class="font-semibold acm-text-red">K·∫øt qu·∫£</p>
                            <p class="text-xl font-bold text-red-400">B·ªã lo·∫°i b·ªüi Feyenoord (T·ªïng t·ª∑ s·ªë 1-2)</p>
                        </div>
                    </div>
                </div>
                <div class="acm-bg-surface p-6 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold acm-text-red mb-4 flex items-center">
                        <div class="tournament-logo coppa-italia-logo">CI</div>Coppa Italia: H√†nh Tr√¨nh ƒê·∫øn Chung K·∫øt
                    </h3>
                    <p class="acm-text-secondary mb-4">Milan ƒë√£ th·ªÉ hi·ªán b·∫£n lƒ©nh ·ªü c√°c tr·∫≠n ƒë·∫•u lo·∫°i tr·ª±c ti·∫øp, v∆∞·ª£t qua
                        c√°c ƒë·ªëi th·ªß m·∫°nh ƒë·ªÉ v√†o chung k·∫øt, nh∆∞ng l·∫°i g·ª•c ng√£ ·ªü ng∆∞·ª°ng c·ª≠a thi√™n ƒë∆∞·ªùng.</p>
                    <ul class="timeline">
                         <li class="timeline-item">
                            <div class="timeline-item-content">
                                <h4 class="timeline-item-title">V√≤ng 16 ƒë·ªôi</h4>
                                <p class="acm-text-light">vs Sassuolo <strong class="acm-highlight-green">(Th·∫Øng 6-1)</strong></p>
                            </div>
                        </li>
                        <li class="timeline-item">
                            <div class="timeline-item-content">
                                <h4 class="timeline-item-title">T·ª© k·∫øt</h4>
                                <p class="acm-text-light">vs AS Roma <strong class="acm-highlight-green">(Th·∫Øng 3-1)</strong></p>
                            </div>
                        </li>
                        <li class="timeline-item">
                            <div class="timeline-item-content">
                                <h4 class="timeline-item-title">B√°n k·∫øt</h4>
                                <p class="acm-text-light">vs Inter Milan <strong class="acm-highlight-green">(Th·∫Øng chung cu·ªôc 4-1)</strong></p>
                            </div>
                        </li>
                        <li class="timeline-item">
                            <div class="timeline-item-content">
                                <h4 class="timeline-item-title">Chung k·∫øt</h4>
                                <p class="acm-text-light">vs Bologna <strong class="acm-highlight-red-text">(Thua 0-1)</strong></p>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="acm-bg-surface p-6 rounded-xl shadow-lg flex flex-col">
                    <h3 class="text-2xl font-bold acm-text-red mb-4 flex items-center">
                        <div class="tournament-logo supercoppa-logo">SI</div>Supercoppa Italiana: Tia S√°ng An ·ª¶i
                    </h3>
                    <p class="acm-text-secondary mb-4">Chi·∫øn th·∫Øng thuy·∫øt ph·ª•c tr∆∞·ªõc ƒë·∫°i k√¨nh ƒë·ªãch Inter Milan ƒë√£ mang v·ªÅ
                        danh hi·ªáu duy nh·∫•t c·ªßa m√πa gi·∫£i, m·ªôt ni·ªÅm vui hi·∫øm hoi cho c√°c Milanista.</p>
                    <div
                        class="flex-grow flex flex-col items-center justify-center text-center p-4 bg-red-600/10 rounded-lg">
                        <span class="text-6xl" style="color: #CEB888;">üèÜ</span>
                        <p class="text-3xl font-bold acm-text-light mt-4">V√î ƒê·ªäCH</p>
                        <p class="text-lg acm-text-secondary">ƒê√°nh b·∫°i Inter Milan 3-2</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="off-pitch" class="app-section space-y-8 hidden">
            <div>
                <h2 class="text-3xl font-bold acm-text-red flex items-center"><span class="mr-2 text-2xl">üíº</span>T√†i
                    Ch√≠nh & H·∫≠u Tr∆∞·ªùng</h2>
                <p class="mt-2 text-lg acm-text-secondary">Nh·ªØng bi·∫øn ƒë·ªông tr√™n s√¢n c·ªè song h√†nh c√πng c√°c v·∫•n ƒë·ªÅ v·ªÅ t√†i
                    ch√≠nh v√† m·ªëi quan h·ªá cƒÉng th·∫≥ng v·ªõi ng∆∞·ªùi h√¢m m·ªô. Kh√°m ph√° nh·ªØng ƒë·ªông l·ª±c ngo√†i s√¢n c·ªè ƒë·ªãnh h√¨nh m√πa
                    gi·∫£i c·ªßa Milan.</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                <div class="lg:col-span-3 acm-bg-surface p-6 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold acm-text-red mb-1">S·ª©c Kh·ªèe Kinh T·∫ø</h3>
                    <p class="acm-text-secondary mb-4">D√π gi√° tr·ªã CLB tƒÉng, vi·ªác kh√¥ng ƒë∆∞·ª£c d·ª± c√∫p Ch√¢u √Çu m√πa t·ªõi s·∫Ω t·∫°o ra
                        √°p l·ª±c t√†i ch√≠nh l·ªõn, d·ª± ki·∫øn g√¢y th√¢m h·ª•t ƒë√°ng k·ªÉ.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="p-4 bg-gray-800 rounded-lg">
                            <h4 class="font-medium text-gray-400">Doanh thu 2023-24</h4>
                            <p class="text-2xl font-bold acm-text-light">‚Ç¨397.6M</p>
                        </div>
                        <div class="p-4 bg-red-900/30 rounded-lg">
                            <h4 class="font-medium text-red-400">L·ªó d·ª± ki·∫øn 24-25</h4>
                            <p class="text-2xl font-bold text-red-300">~ ‚Ç¨25M</p>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>
                <div class="lg:col-span-2 acm-bg-surface p-6 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold acm-text-red mb-1">M·ªëi Quan H·ªá v·ªõi Ng∆∞·ªùi H√¢m M·ªô</h3>
                    <p class="acm-text-secondary mb-4">S·ª± b·∫•t m√£n l√™n ƒë·∫øn ƒë·ªânh ƒëi·ªÉm v·ªõi c√°c cu·ªôc bi·ªÉu t√¨nh c·ªßa Curva Sud
                        nh·∫Øm v√†o ch·ªß s·ªü h·ªØu RedBird, ph·∫£n √°nh s·ª± m·∫•t k·∫øt n·ªëi gi·ªØa CƒêV v√† ban l√£nh ƒë·∫°o.</p>
                    <blockquote class="border-l-4 acm-border-red pl-4 py-2 bg-gray-800/50">
                        <p class="text-xl font-semibold italic acm-text-light">"Go Home"</p>
                        <footer class="acm-text-secondary mt-2">‚Äî Th√¥ng ƒëi·ªáp t·ª´ c√°c Ultras trong tr·∫≠n ƒë·∫•u cu·ªëi c√πng c·ªßa m√πa
                            gi·∫£i.</footer>
                    </blockquote>
                    <h4 class="font-semibold mt-6 mb-2 acm-text-red">C√°c b·∫•t b√¨nh ch√≠nh:</h4>
                    <ul class="list-disc list-inside space-y-1 acm-text-light">
                        <li>Th√†nh t√≠ch m√πa gi·∫£i ƒë√°ng th·∫•t v·ªçng.</li>
                        <li>Thi·∫øu ƒë·∫ßu t∆∞ v√† tham v·ªçng r√µ r√†ng t·ª´ ch·ªß s·ªü h·ªØu.</li>
                        <li>Sa th·∫£i huy·ªÅn tho·∫°i Paolo Maldini.</li>
                        <li>S·ª± m·∫•t k·∫øt n·ªëi v·ªõi b·∫£n s·∫Øc CLB.</li>
                    </ul>
                </div>
            </div>
            <div class="acm-bg-surface p-6 rounded-xl shadow-lg mt-8">
                <h3 class="text-2xl font-bold acm-text-red mb-4">Ho·∫°t ƒê·ªông Chuy·ªÉn Nh∆∞·ª£ng M√πa Gi·∫£i 2024-2025</h3>
                <p class="text-sm acm-text-secondary mb-4">L∆∞u √Ω: D·ªØ li·ªáu chuy·ªÉn nh∆∞·ª£ng d∆∞·ªõi ƒë√¢y mang t√≠nh t·ªïng h·ª£p v√† minh
                    h·ªça d·ª±a tr√™n c√°c th√¥ng tin c√≥ s·∫µn, ph√≠ chuy·ªÉn nh∆∞·ª£ng c√≥ th·ªÉ thay ƒë·ªïi ho·∫∑c kh√¥ng ƒë∆∞·ª£c c√¥ng b·ªë ch√≠nh
                    th·ª©c.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
                    <div>
                        <h4 class="text-xl font-semibold mb-3 acm-highlight-green border-b-2 border-green-700 pb-2">C·∫ßu Th·ªß
                            ƒê·∫øn</h4>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y acm-border-dark">
                                <thead class="bg-gray-800">
                                    <tr>
                                        <th scope="col"
                                            class="px-4 py-2 text-left text-xs font-medium text-green-400 uppercase tracking-wider">
                                            T√™n</th>
                                        <th scope="col"
                                            class="px-4 py-2 text-left text-xs font-medium text-green-400 uppercase tracking-wider hidden sm:table-cell">
                                            T·ª´ CLB</th>
                                        <th scope="col"
                                            class="px-4 py-2 text-left text-xs font-medium text-green-400 uppercase tracking-wider">
                                            Ph√≠/Lo·∫°i</th>
                                    </tr>
                                </thead>
                                <tbody id="transfers-in-table-body" class="divide-y acm-border-dark">
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div>
                        <h4 class="text-xl font-semibold mb-3 acm-highlight-red-text border-b-2 border-red-700 pb-2">C·∫ßu Th·ªß ƒêi
                        </h4>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y acm-border-dark">
                                <thead class="bg-gray-800">
                                    <tr>
                                        <th scope="col"
                                            class="px-4 py-2 text-left text-xs font-medium text-red-400 uppercase tracking-wider">
                                            T√™n</th>
                                        <th scope="col"
                                            class="px-4 py-2 text-left text-xs font-medium text-red-400 uppercase tracking-wider hidden sm:table-cell">
                                            ƒê·∫øn CLB</th>
                                        <th scope="col"
                                            class="px-4 py-2 text-left text-xs font-medium text-red-400 uppercase tracking-wider">
                                            Ph√≠/Lo·∫°i</th>
                                    </tr>
                                </thead>
                                <tbody id="transfers-out-table-body" class="divide-y acm-border-dark">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="acm-bg-surface p-6 rounded-xl shadow-lg">
                <h3 class="text-2xl font-bold acm-text-red mb-4">Ban Hu·∫•n Luy·ªán: Chi·∫øc Gh·∫ø N√≥ng</h3>
                <p class="acm-text-secondary mb-6">S·ª± b·∫•t ·ªïn ·ªü v·ªã tr√≠ HLV l√† m·ªôt trong nh·ªØng nguy√™n nh√¢n ch√≠nh d·∫´n ƒë·∫øn th√†nh
                    t√≠ch k√©m c·ªèi. Vi·ªác thay t∆∞·ªõng gi·ªØa d√≤ng v√† c√¥ng b·ªë HLV m·ªõi cho m√πa sau ngay l·∫≠p t·ª©c cho th·∫•y s·ª±
                    thi·∫øu ki√™n nh·∫´n v√† t·∫ßm nh√¨n d√†i h·∫°n.</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-center text-center">
                    <div>
                        <img src="https://dims.apnews.com/dims4/default/791df99/2147483647/strip/false/crop/4480x2984+0+0/resize/1486x990!/quality/90/?url=https%3A%2F%2Fassets.apnews.com%2F7b%2Fc1%2F70ee58a14626b62bbf4a54a10b74%2Fb093963152df4ac79da6db41da6bc388"
                            alt="Paulo Fonseca" class="w-24 h-24 mx-auto rounded-full mb-2 object-cover border-2 acm-border-dark">
                        <b class="block acm-text-light">Paulo Fonseca</b>
                        <span class="text-xs acm-text-secondary">ƒê·∫ßu m√πa gi·∫£i - 29/12/2024</span>
                    </div>
                    <div class="text-2xl acm-text-secondary hidden md:block">&rarr;</div>
                    <div class="md:hidden text-2xl acm-text-secondary my-2">&darr;</div>
                    <div>
                        <img src="https://icdn.sempremilan.com/wp-content/uploads/2024/12/sergio-conceicao-official-milan.jpg"
                            alt="S√©rgio Concei√ß√£o" class="w-24 h-24 mx-auto rounded-full mb-2 object-cover border-2 acm-border-dark">
                        <b class="block acm-text-light">S√©rgio Concei√ß√£o</b>
                        <span class="text-xs acm-text-secondary">30/12/2024 - Cu·ªëi m√πa gi·∫£i</span>
                    </div>
                    <div class="text-2xl acm-text-secondary hidden md:block">&rarr;</div>
                    <div class="md:hidden text-2xl acm-text-secondary my-2">&darr;</div>
                    <div>
                        <img src="https://icdn.sempremilan.com/wp-content/uploads/2025/05/GsIXkXbXMAAKUfs.jpeg"
                            alt="Massimiliano Allegri"
                            class="w-24 h-24 mx-auto rounded-full mb-2 object-cover border-2 acm-border-red">
                        <b class="block acm-text-light">Massimiliano Allegri</b>
                        <span class="text-xs acm-text-secondary">B·ªï nhi·ªám cho m√πa 2025/26</span>
                    </div>
                </div>
            </div>
            <div class="acm-bg-surface p-6 rounded-xl shadow-lg mt-8">
                <h3 class="text-2xl font-bold acm-text-red mb-4">Th√†nh Ph·∫ßn Ban L√£nh ƒê·∫°o (T√≠nh ƒë·∫øn 02/06/2025)</h3>
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y acm-border-dark">
                        <thead class="bg-gray-800">
                            <tr>
                                <th scope="col"
                                    class="px-6 py-3 text-left text-xs font-medium acm-text-secondary uppercase tracking-wider">
                                    T√™n</th>
                                <th scope="col"
                                    class="px-6 py-3 text-left text-xs font-medium acm-text-secondary uppercase tracking-wider">
                                    Ch·ª©c V·ª•/Vai Tr√≤</th>
                                <th scope="col"
                                    class="px-6 py-3 text-left text-xs font-medium acm-text-secondary uppercase tracking-wider">
                                    Li√™n K·∫øt</th>
                            </tr>
                        </thead>
                        <tbody id="management-table-body" class="divide-y acm-border-dark">
                        </tbody>
                    </table>
                </div>
            </div>

        </section>

        <section id="squad" class="app-section space-y-8 hidden">
            <div>
                <h2 class="text-3xl font-bold acm-text-red flex items-center"><span
                        class="mr-2 text-2xl">üë•</span>Ph√¢n T√≠ch ƒê·ªôi H√¨nh</h2>
                <p class="mt-2 text-lg acm-text-secondary">Kh√°m ph√° chi ti·∫øt t·ª´ng c·∫ßu th·ªß trong ƒë·ªôi h√¨nh AC Milan m√πa gi·∫£i
                    2024-2025. S·ª≠ d·ª•ng b·ªô l·ªçc ƒë·ªÉ xem theo v·ªã tr√≠ v√† s·∫Øp x·∫øp theo c√°c ch·ªâ s·ªë kh√°c nhau. Nh·∫•p v√†o m·ªôt c·∫ßu
                    th·ªß ƒë·ªÉ xem ph√¢n t√≠ch s√¢u h∆°n.</p>
            </div>
            <div class="acm-bg-surface p-4 sm:p-6 rounded-xl shadow-lg">
                <div class="flex flex-col sm:flex-row items-center justify-between mb-4 gap-4">
                    <div class="w-full sm:w-auto">
                        <label for="position-filter" class="text-sm font-medium acm-text-light mr-2">L·ªçc theo v·ªã
                            tr√≠:</label>
                        <select id="position-filter"
                            class="acm-bg-surface-header border acm-border-dark acm-text-light text-sm rounded-lg focus:ring-red-500 focus:border-red-500 p-2 placeholder-acm">
                            <option value="all">T·∫•t c·∫£</option>
                            <option value="GK">Th·ªß m√¥n (GK)</option>
                            <option value="DF">H·∫≠u v·ªá (DF)</option>
                            <option value="MF">Ti·ªÅn v·ªá (MF)</option>
                            <option value="FW">Ti·ªÅn ƒë·∫°o (FW)</option>
                        </select>
                    </div>
                    <div class="w-full sm:w-auto">
                        <input type="text" id="name-search" placeholder="T√¨m ki·∫øm theo t√™n..."
                            class="acm-bg-surface-header border acm-border-dark acm-text-light text-sm rounded-lg focus:ring-red-500 focus:border-red-500 p-2 w-full placeholder-acm">
                    </div>
                </div>

                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left acm-text-secondary">
                        <thead class="text-xs acm-text-light uppercase bg-gray-800">
                            <tr>
                                <th scope="col" class="px-6 py-3 table-header-sortable" data-sort="name">C·∫ßu th·ªß</th>
                                <th scope="col" class="px-6 py-3 table-header-sortable hidden md:table-cell"
                                    data-sort="age">Tu·ªïi</th>
                                <th scope="col" class="px-6 py-3 table-header-sortable" data-sort="appearances">S·ªë tr·∫≠n
                                </th>
                                <th scope="col" class="px-6 py-3 table-header-sortable" data-sort="goals">B√†n th·∫Øng</th>
                                <th scope="col" class="px-6 py-3 table-header-sortable" data-sort="value">Gi√° tr·ªã TT
                                    (‚Ç¨M)</th>
                            </tr>
                        </thead>
                        <tbody id="squad-table-body" class="divide-y acm-border-dark">
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

    </main>

    <div id="player-modal"
        class="fixed inset-0 bg-black bg-opacity-75 z-[100] items-center justify-center hidden modal-backdrop"> 
        <div
            class="acm-bg-surface rounded-xl shadow-2xl w-11/12 max-w-4xl max-h-[90vh] overflow-y-auto m-8 modal-content transform scale-95">
            <div class="sticky top-0 acm-bg-surface-header p-4 border-b acm-border-dark flex justify-between items-center z-10">
                <h3 id="modal-player-name" class="text-2xl font-bold acm-text-red"></h3>
                <button id="close-modal-btn"
                    class="acm-text-secondary hover:acm-text-light text-3xl leading-none">&times;</button>
            </div>
            <div id="modal-body" class="p-6 space-y-6">
            </div>
        </div>
    </div>

    <script>
        const AppData = {
            squad: [
                { "id": 1, "name": "Mike Maignan", "position": "GK", "age": 29, "appearances": 17, "goals": 0, "assists": 0, "value": 25.0, "nationality": "Ph√°p", "contractUntil": "2026", "photoUrl": "https://assets.goal.com/images/v3/blt8040af581988c5de/maignan_milan.jpg?auto=webp&format=pjpg&width=3840&quality=60", "stats": { "cleanSheets": 7, "saves": 53, "savePercentage": 78.5, "goalsConceded": 18, "goals": 0, "assists": 0, "xG": 0, "xA": 0, "keyPasses": 0, "tackles": 0, "interceptions": 0 } },
                { "id": 2, "name": "Marco Sportiello", "position": "GK", "age": 33, "appearances": 3, "goals": 0, "assists": 0, "value": 0.5, "nationality": "√ù", "contractUntil": "2027", "photoUrl": "https://www.rossoneriblog.com/wp-content/uploads/2023/06/atalanta-bc-v-as-roma-serie-a-e1687890036296.jpg", "stats": { "cleanSheets": 1, "saves": 10, "savePercentage": 65.0, "goalsConceded": 5, "goals": 0, "assists": 0, "xG": 0, "xA": 0, "keyPasses": 0, "tackles": 0, "interceptions": 0 } },
                { "id": 3, "name": "Lorenzo Torriani", "position": "GK", "age": 20, "appearances": null, "goals": 0, "assists": 0, "value": 0.1, "nationality": "√ù", "contractUntil": "2027", "photoUrl": "https://img.sofascore.com/api/v1/player/1403294/image", "stats": { "cleanSheets": 0, "saves": 0, "savePercentage": 0.0, "goalsConceded": 0, "goals": 0, "assists": 0, "xG": 0, "xA": 0, "keyPasses": 0, "tackles": 0, "interceptions": 0 } },
                { "id": 4, "name": "Th√©o Hernandez", "position": "DF", "age": 27, "appearances": 49, "goals": 5, "assists": 4, "value": 40.0, "nationality": "Ph√°p", "contractUntil": "2026", "photoUrl": "https://img.sofascore.com/api/v1/player/788027/image", "stats": { "goals": 5, "assists": 4, "xG": 3.17, "xA": 5.34, "keyPasses": 0, "tackles": 60, "interceptions": 35 } },
                { "id": 5, "name": "√Ålex Jim√©nez", "position": "DF", "age": 20, "appearances": 28, "goals": 0, "assists": 2, "value": 10.0, "nationality": "T√¢y Ban Nha", "contractUntil": "2028", "photoUrl": "https://img.sofascore.com/api/v1/player/1184308/image", "stats": { "goals": 0, "assists": 2, "xG": 0, "xA": 0, "keyPasses": 0, "tackles": 0, "interceptions": 0 } },
                { "id": 6, "name": "Emerson Royal", "position": "DF", "age": 26, "appearances": 0, "goals": 0, "assists": 0, "value": 10.0, "nationality": "Brazil", "contractUntil": "2028", "photoUrl": "https://img.sofascore.com/api/v1/player/856123/image", "stats": { "goals": 0, "assists": 0, "xG": 0, "xA": 0, "keyPasses": 0, "tackles": 0, "interceptions": 0 } },
                { "id": 7, "name": "Fikayo Tomori", "position": "DF", "age": 27, "appearances": 36, "goals": 0, "assists": 2, "value": 20.0, "nationality": "Anh", "contractUntil": "2027", "photoUrl": "https://img.sofascore.com/api/v1/player/788255/image", "stats": { "goals": 0, "assists": 2, "xG": 0.1, "xA": 0.43, "keyPasses": 0, "tackles": 55, "interceptions": 45 } },
                { "id": 8, "name": "Alessandro Florenzi", "position": "DF", "age": 34, "appearances": 1, "goals": 0, "assists": 0, "value": 1.0, "nationality": "√ù", "contractUntil": "2025", "photoUrl": "https://assets.goal.com/images/v3/blt5e64f426e7f301d3/florenzi.jpg?auto=webp&format=pjpg&width=3840&quality=60", "stats": { "goals": 0, "assists": 0, "xG": 0, "xA": 0, "keyPasses": 0, "tackles": 0, "interceptions": 0 } },
                { "id": 9, "name": "Malick Thiaw", "position": "DF", "age": 23, "appearances": 31, "goals": 1, "assists": 0, "value": 20.0, "nationality": "ƒê·ª©c", "contractUntil": "2027", "photoUrl": "https://img.sofascore.com/api/v1/player/1014286/image", "stats": { "goals": 1, "assists": 0, "xG": 0, "xA": 0.2, "keyPasses": 0, "tackles": 40, "interceptions": 30 } },
                { "id": 10, "name": "Strahinja Pavloviƒá", "position": "DF", "age": 24, "appearances": 35, "goals": 2, "assists": 0, "value": 18.0, "nationality": "Serbia", "contractUntil": "2028", "photoUrl": "https://img.sofascore.com/api/v1/player/965893/image", "stats": { "goals": 2, "assists": 0, "xG": 0, "xA": 0, "keyPasses": 0, "tackles": 0, "interceptions": 0 } },
                { "id": 11, "name": "Kyle Walker", "position": "DF", "age": 35, "appearances": 16, "goals": 0, "assists": 0, "value": 5.0, "nationality": "Anh", "contractUntil": "2025", "photoUrl": "https://img.sofascore.com/api/v1/player/44614/image", "note": "Cho m∆∞·ª£n (Man City)", "stats": { "goals": 0, "assists": 0, "xG": 0, "xA": 0, "keyPasses": 0, "tackles": 0, "interceptions": 0 } },
                { "id": 12, "name": "Davide Bartesaghi", "position": "DF", "age": 19, "appearances": 3, "goals": 0, "assists": 0, "value": 1.5, "nationality": "√ù", "contractUntil": "2026", "photoUrl": "https://img.sofascore.com/api/v1/player/1390489/image", "stats": { "goals": 0, "assists": 0, "xG": 0, "xA": 0, "keyPasses": 0, "tackles": 4, "interceptions": 0 } },
                { "id": 13, "name": "Filippo Terracciano", "position": "DF", "age": 22, "appearances": 15, "goals": 0, "assists": 0, "value": 7.0, "nationality": "√ù", "contractUntil": "2029", "photoUrl": "https://img.sofascore.com/api/v1/player/1034303/image", "stats": { "goals": 0, "assists": 0, "xG": 0.2, "xA": 0.1, "keyPasses": null, "tackles": null, "interceptions": null } },
                { "id": 14, "name": "Matteo Gabbia", "position": "DF", "age": 25, "appearances": 25, "goals": 1, "assists": 0, "value": 8.0, "nationality": "√ù", "contractUntil": "2029", "photoUrl": "https://img.sofascore.com/api/v1/player/826195/image", "stats": { "goals": 1, "assists": 0, "xG": null, "xA": null, "keyPasses": 17, "tackles": 58, "interceptions": 58 } },
                { "id": 15, "name": "Ruben Loftus-Cheek", "position": "MF", "age": 29, "appearances": 28, "goals": 0, "assists": 0, "value": 16.0, "nationality": "Anh", "contractUntil": "2027", "photoUrl": "https://img.sofascore.com/api/v1/player/284441/image", "stats": { "goals": 0, "assists": 0, "xG": 0.7, "xA": 1.9, "keyPasses": 20, "tackles": 0, "interceptions": 0 } },
                { "id": 16, "name": "Tijjani Reijnders", "position": "MF", "age": 26, "appearances": 54, "goals": 15, "assists": 6, "value": 50.0, "nationality": "H√† Lan", "contractUntil": "2027", "photoUrl": "https://img.sofascore.com/api/v1/player/893549/image", "stats": { "goals": 15, "assists": 6, "xG": 7.5, "xA": 5.0, "keyPasses": 117, "tackles": 0, "interceptions": 0 } },
                { "id": 17, "name": "Youssouf Fofana", "position": "MF", "age": 25, "appearances": 52, "goals": 1, "assists": 8, "value": 30.0, "nationality": "Ph√°p", "contractUntil": "2028", "photoUrl": "https://img.sofascore.com/api/v1/player/945062/image", "stats": { "goals": 1, "assists": 8, "xG": 1.5, "xA": 4.0, "keyPasses": 45, "tackles": 0, "interceptions": 0 } },
                { "id": 18, "name": "Mattia Liberali", "position": "MF", "age": 18, "appearances": 1, "goals": 0, "assists": 0, "value": 0.5, "nationality": "√ù", "contractUntil": "2027", "photoUrl": "https://img.sofascore.com/api/v1/player/1475557/image", "stats": { "goals": 0, "assists": 0, "xG": 0, "xA": 0, "keyPasses": 0, "tackles": 0, "interceptions": 0 } },
                { "id": 19, "name": "Warren Bondo", "position": "MF", "age": 21, "appearances": 5, "goals": 0, "assists": 0, "value": 10.0, "nationality": "Ph√°p", "contractUntil": "2029", "photoUrl": "https://img.sofascore.com/api/v1/player/1000366/image", "stats": { "goals": 0, "assists": 0, "xG": 0, "xA": 0, "keyPasses": 0, "tackles": 0, "interceptions": 0 } },
                { "id": 20, "name": "Yunus Musah", "position": "MF", "age": 22, "appearances": 40, "goals": 0, "assists": 0, "value": 22.0, "nationality": "M·ªπ", "contractUntil": "2028", "photoUrl": "https://img.sofascore.com/api/v1/player/983815/image", "stats": { "goals": 0, "assists": 0, "xG": 0, "xA": 0, "keyPasses": 0, "tackles": 0, "interceptions": 0 } },
                { "id": 21, "name": "Santiago Gim√©nez", "position": "FW", "age": 24, "appearances": 19, "goals": 6, "assists": 3, "value": 37.0, "nationality": "Mexico", "contractUntil": "2029", "photoUrl": "https://img.sofascore.com/api/v1/player/892141/image", "stats": { "goals": 6, "assists": 3, "xG": 4.8, "xA": 0.9, "keyPasses": 15, "tackles": 0, "interceptions": 0 } },
                { "id": 22, "name": "Luka Joviƒá", "position": "FW", "age": 27, "appearances": 17, "goals": 4, "assists": 0, "value": 2.5, "nationality": "Serbia", "contractUntil": "2025", "photoUrl": "https://img.sofascore.com/api/v1/player/319129/image", "stats": { "goals": 4, "assists": 0, "xG": 0, "xA": 0, "keyPasses": 0, "tackles": 0, "interceptions": 0 } },
                { "id": 23, "name": "Rafael Le√£o", "position": "FW", "age": 26, "appearances": 34, "goals": null, "assists": null, "value": 75.0, "nationality": "B·ªì ƒê√†o Nha", "contractUntil": "2028", "photoUrl": "https://img.sofascore.com/api/v1/player/851284/image", "stats": { "goals": null, "assists": null, "xG": 7.6, "xA": 8.4, "keyPasses": 70, "tackles": 0, "interceptions": 0 } },
                { "id": 24, "name": "Christian Pulisic", "position": "FW", "age": 26, "appearances": 48, "goals": 17, "assists": 11, "value": 50.0, "nationality": "M·ªπ", "contractUntil": "2027", "photoUrl": "https://img.sofascore.com/api/v1/player/817957/image", "stats": { "goals": 17, "assists": 11, "xG": 12.0, "xA": 6.4, "keyPasses": 60, "tackles": 0, "interceptions": 0 } },
                { "id": 25, "name": "Samuel Chukwueze", "position": "FW", "age": 26, "appearances": 36, "goals": 5, "assists": 0, "value": 14.0, "nationality": "Nigeria", "contractUntil": "2028", "photoUrl": "https://img.sofascore.com/api/v1/player/822470/image", "stats": { "goals": 5, "assists": 0, "xG": 4.5, "xA": 1.5, "keyPasses": 25, "tackles": 0, "interceptions": 0 } },
                { "id": 26, "name": "Francesco Camarda", "position": "FW", "age": 17, "appearances": 1, "goals": 0, "assists": 0, "value": 10.0, "nationality": "√ù", "contractUntil": "2027", "photoUrl": "https://img.sofascore.com/api/v1/player/1520771/image", "stats": { "goals": 0, "assists": 0, "xG": 0, "xA": 0, "keyPasses": 0, "tackles": 0, "interceptions": 0 } },
                { "id": 27, "name": "Bob Murphy Omoregbe", "position": "FW", "age": 21, "appearances": 1, "goals": 0, "assists": 0, "value": 0.2, "nationality": "√ù", "contractUntil": "2025", "photoUrl": "https://img.sofascore.com/api/v1/player/1175945/image", "stats": { "goals": 0, "assists": 0, "xG": 0, "xA": 0, "keyPasses": 0, "tackles": 0, "interceptions": 0 } },
                { "id": 28, "name": "Jo√£o F√©lix", "position": "FW", "age": 25, "appearances": 15, "goals": 2, "assists": 0, "value": 25.0, "nationality": "B·ªì ƒê√†o Nha", "contractUntil": "2025", "photoUrl": "https://img.sofascore.com/api/v1/player/851671/image", "note": "Cho m∆∞·ª£n (Chelsea)", "stats": { "goals": 2, "assists": 0, "xG": 0.96, "xA": 0.42, "keyPasses": null, "tackles": 0, "interceptions": 0 } },
                { "id": 29, "name": "Tammy Abraham", "position": "FW", "age": 27, "appearances": 44, "goals": 10, "assists": 0, "value": 15.0, "nationality": "Anh", "contractUntil": "2025", "photoUrl": "https://img.sofascore.com/api/v1/player/610766/image", "note": "Cho m∆∞·ª£n (Roma)", "stats": { "goals": 10, "assists": 0, "xG": 12.5, "xA": 2.1, "keyPasses": 20, "tackles": 0, "interceptions": 0 } },
                { "id": 30, "name": "Riccardo Sottil", "position": "FW", "age": 26, "appearances": 8, "goals": 0, "assists": 0, "value": 4.0, "nationality": "√ù", "contractUntil": "2025", "photoUrl": "https://img.sofascore.com/api/v1/player/893640/image", "note": "Cho m∆∞·ª£n (Fiorentina)", "stats": { "goals": 0, "assists": 0, "xG": 0, "xA": 0, "keyPasses": 0, "tackles": 0, "interceptions": 0 } }
            ],
            performance: {
                serieA: {
                    labels: ['M·ª•c ti√™u Top 4', 'AC Milan', 'Atalanta (Th·ª© 7)', 'Bologna (Th·ª© 6)'],
                    points: [71, 63, 69, 68]
                }
            },
            finance: {
                revenue: {
                    labels: ['Th∆∞∆°ng m·∫°i (44%)', 'B·∫£n quy·ªÅn TH (38%)', 'Ng√†y thi ƒë·∫•u (18%)'],
                    data: [174.9, 151.1, 71.6]
                }
            },
            management: [
                { name: 'Paolo Scaroni', role: 'Ch·ªß t·ªãch', affiliation: 'AC Milan' },
                { name: 'Giorgio Furlani', role: 'Gi√°m ƒë·ªëc ƒêi·ªÅu h√†nh (CEO)', affiliation: 'AC Milan (tr∆∞·ªõc ƒë√¢y thu·ªôc qu·ªπ Elliott)' },
                { name: 'Zlatan Ibrahimoviƒá', role: 'C·ªë v·∫•n C·∫•p cao cho Ban L√£nh ƒë·∫°o & RedBird', affiliation: 'AC Milan / RedBird Capital Partners'},
                { name: 'Gerry Cardinale', role: 'Th√†nh vi√™n HƒêQT', affiliation: 'RedBird Capital Partners' },
                { name: 'Randy Levine', role: 'Th√†nh vi√™n HƒêQT', affiliation: 'RedBird Capital Partners' },
                { name: 'Mark Dowley', role: 'Th√†nh vi√™n HƒêQT', affiliation: 'RedBird Capital Partners' },
                { name: 'Robert Klein', role: 'Th√†nh vi√™n HƒêQT', affiliation: 'RedBird Capital Partners' },
                { name: 'David Castelblanco', role: 'Th√†nh vi√™n HƒêQT', affiliation: 'RedBird Capital Partners' },
                { name: 'Gordon Singer', role: 'Th√†nh vi√™n HƒêQT', affiliation: 'Elliott Management' },
                { name: 'Dominic Mitchell', role: 'Th√†nh vi√™n HƒêQT', affiliation: 'Elliott Management' },
                { name: 'Stefano Cocirio', role: 'Th√†nh vi√™n HƒêQT/Gi√°m ƒë·ªëc T√†i ch√≠nh (CFO)', affiliation: 'AC Milan (tr∆∞·ªõc ƒë√¢y thu·ªôc qu·ªπ Elliott)' },
                { name: 'Alfredo Craca', role: 'Th√†nh vi√™n HƒêQT', affiliation: 'AC Milan' },
                { name: 'Riccardo Stefanelli', role: 'Th√†nh vi√™n HƒêQT (ƒê·ªôc l·∫≠p)', affiliation: 'B·ªï nhi·ªám b·ªüi RedBird' },
                { name: 'Franco Baresi', role: 'Ph√≥ Ch·ªß t·ªãch Danh d·ª±', affiliation: 'AC Milan' },
                { name: 'Geoffrey Moncada', role: 'Gi√°m ƒë·ªëc K·ªπ thu·∫≠t', affiliation: 'AC Milan' },
                { name: 'Maikel Oettle', role: 'Gi√°m ƒë·ªëc Th∆∞∆°ng m·∫°i', affiliation: 'AC Milan' },
                { name: 'Francesca Montini', role: 'Gi√°m ƒë·ªëc Th∆∞∆°ng hi·ªáu', affiliation: 'AC Milan' }
            ],
            transfers: {
                incoming: [
                    { name: 'Emerson Royal', from: 'Tottenham Hotspur', fee: '‚Ç¨15M', position: 'DF' },
                    { name: 'Strahinja Pavloviƒá', from: 'Red Bull Salzburg', fee: '‚Ç¨18M', position: 'DF' },
                    { name: 'Youssouf Fofana', from: 'AS Monaco', fee: '‚Ç¨25M', position: 'MF' },
                    { name: 'Warren Bondo', from: 'AC Monza', fee: '‚Ç¨8M', position: 'MF' },
                    { name: 'Santiago Gim√©nez', from: 'Feyenoord', fee: '‚Ç¨40M', position: 'FW' },
                    { name: 'Kyle Walker', from: 'Manchester City', fee: 'Cho m∆∞·ª£n', position: 'DF' },
                    { name: 'Jo√£o F√©lix', from: 'Chelsea', fee: 'Cho m∆∞·ª£n', position: 'FW' },
                    { name: 'Tammy Abraham', from: 'AS Roma', fee: 'Cho m∆∞·ª£n', position: 'FW' },
                    { name: 'Riccardo Sottil', from: 'Fiorentina', fee: 'Cho m∆∞·ª£n', position: 'FW' },
                ],
                outgoing: [
                    { name: 'Charles De Ketelaere', to: 'Atalanta BC', fee: '‚Ç¨22M (mua ƒë·ª©t)', position: 'MF' },
                    { name: 'Alexis Saelemaekers', to: 'Bologna FC', fee: '‚Ç¨10M (mua ƒë·ª©t)', position: 'FW' },
                    { name: 'Divock Origi', to: 'Nottingham Forest', fee: '‚Ç¨5M', position: 'FW' },
                    { name: 'Junior Messias', to: 'Genoa CFC', fee: '‚Ç¨3M (mua ƒë·ª©t)', position: 'FW' },
                    { name: 'Rade Kruniƒá', to: 'Fenerbah√ße SK', fee: '‚Ç¨3.5M', position: 'MF' },
                    { name: 'Simon Kj√¶r', to: 'H·∫øt h·ª£p ƒë·ªìng', fee: 'CNTD', position: 'DF' },
                    { name: 'Antonio Mirante', to: 'H·∫øt h·ª£p ƒë·ªìng', fee: 'CNTD', position: 'GK' },
                    { name: 'Olivier Giroud', to: 'Los Angeles FC', fee: 'CNTD', position: 'FW' },
                    { name: 'Marko Lazetiƒá', to: 'Fortuna Sittard', fee: 'Cho m∆∞·ª£n', position: 'FW' },
                    { name: 'Daniel Maldini', to: 'AC Monza', fee: 'Cho m∆∞·ª£n', position: 'MF' },
                ]
            }
        };

        let currentSort = { column: 'name', direction: 'asc' };
        let charts = {}; // Object to store chart instances

        // Function to safely format monetary values
        function formatValue(value) {
            if (typeof value === 'number') return value.toFixed(1);
            return 'N/A';
        }

        // Function to render the squad table with current data, filter, and sort
        function renderSquadTable(squadData) {
            const tableBody = document.getElementById('squad-table-body');
            if (!tableBody) return; // Ensure table body exists
            tableBody.innerHTML = ''; // Clear existing rows

            // Sort data based on currentSort state
            const sortedData = [...squadData].sort((a, b) => {
                let aVal = a[currentSort.column];
                let bVal = b[currentSort.column];

                // Handle string sorting (case-insensitive)
                if (typeof aVal === 'string') {
                    aVal = aVal.toLowerCase();
                    bVal = bVal.toLowerCase();
                } else if (aVal === null || aVal === undefined) { // Handle null/undefined values for sorting
                    return currentSort.direction === 'asc' ? 1 : -1;
                } else if (bVal === null || bVal === undefined) {
                    return currentSort.direction === 'asc' ? -1 : 1;
                }
                // Standard comparison
                if (aVal < bVal) return currentSort.direction === 'asc' ? -1 : 1;
                if (aVal > bVal) return currentSort.direction === 'asc' ? 1 : -1;
                return 0;
            });

            // Create and append table rows
            sortedData.forEach(player => {
                const row = document.createElement('tr');
                row.className = 'border-b acm-border-dark table-row-clickable'; // Themed border and clickable class
                row.dataset.playerId = player.id;
                row.innerHTML = `
                    <td class="px-6 py-4 font-medium acm-text-light whitespace-nowrap">
                        <div class="flex items-center">
                             <img src="${player.photoUrl || 'https://placehold.co/32x32/333333/E0E0E0?text=P'}" alt="${player.name}" class="w-8 h-8 rounded-full mr-3 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/32x32/333333/E0E0E0?text=P';">
                            <div>
                                ${player.name}
                                ${player.note ? `<span class="text-xs acm-text-secondary block">${player.note}</span>` : ''}
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 hidden md:table-cell acm-text-secondary">${player.age}</td>
                    <td class="px-6 py-4 acm-text-secondary">${player.appearances === null ? 'N/A' : player.appearances}</td>
                    <td class="px-6 py-4 acm-text-secondary">${player.goals === null ? 'N/A' : player.goals}</td>
                    <td class="px-6 py-4 acm-text-secondary">${formatValue(player.value)}</td>
                `;
                tableBody.appendChild(row);
            });

            // Add click event listeners to new rows for opening player modal
            document.querySelectorAll('.table-row-clickable').forEach(row => {
                row.addEventListener('click', (e) => {
                    const playerId = e.currentTarget.dataset.playerId;
                    openPlayerModal(parseInt(playerId));
                });
            });
        }

        // Function to open the player detail modal
        function openPlayerModal(playerId) {
            const player = AppData.squad.find(p => p.id === playerId);
            if (!player) return; // Player not found

            const modal = document.getElementById('player-modal');
            const modalContent = modal.querySelector('.modal-content');
            const modalBody = document.getElementById('modal-body');
            document.getElementById('modal-player-name').textContent = player.name;

            let statsHtml; // HTML for player stats section
            // Determine chart type based on player position
            if (player.position === 'FW' || player.position === 'MF') {
                statsHtml = `
                    <div class="text-center font-semibold text-lg mb-2 acm-text-red">Ch·ªâ s·ªë t·∫•n c√¥ng & s√°ng t·∫°o</div>
                    <div class="chart-container" style="height: 300px; max-height: 40vh;"><canvas id="playerRadarChart"></canvas></div>`;
            } else if (player.position === 'DF') {
                statsHtml = `
                    <div class="text-center font-semibold text-lg mb-2 acm-text-red">Ch·ªâ s·ªë ph√≤ng ng·ª±</div>
                    <div class="chart-container" style="height: 300px; max-height: 40vh;"><canvas id="playerBarChart"></canvas></div>`;
            } else { // Goalkeeper (GK)
                const playerStats = player.stats || {};
                statsHtml = `
                    <div class="text-center font-semibold text-lg mb-4 acm-text-red">Th·ªëng k√™ th·ªß m√¥n</div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                        <div class="p-3 bg-gray-800 rounded-lg text-center">
                            <h4 class="font-medium text-gray-400 text-sm">Tr·∫≠n gi·ªØ s·∫°ch l∆∞·ªõi</h4>
                            <p class="text-3xl font-bold acm-text-light mt-1">${playerStats.cleanSheets !== undefined && playerStats.cleanSheets !== null ? playerStats.cleanSheets : 'N/A'}</p>
                        </div>
                        <div class="p-3 bg-gray-800 rounded-lg text-center">
                            <h4 class="font-medium text-gray-400 text-sm">T·ª∑ l·ªá c·∫£n ph√°</h4>
                            <p class="text-3xl font-bold acm-text-light mt-1">${playerStats.savePercentage !== undefined && playerStats.savePercentage !== null ? playerStats.savePercentage.toFixed(1) + '%' : 'N/A'}</p>
                        </div>
                    </div>
                    <div class="gk-chart-container"><canvas id="goalkeeperBarChart"></canvas></div>`;
            }

            // Populate modal body with player information and stats chart
            modalBody.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="md:col-span-1 flex flex-col items-center">
                        <img src="${player.photoUrl || 'https://placehold.co/160x160/333333/E0E0E0?text=Player'}" alt="${player.name}" class="w-40 h-40 rounded-full mb-4 object-cover border-4 acm-border-dark" onerror="this.onerror=null;this.src='https://placehold.co/160x160/333333/E0E0E0?text=Player';">
                        <div class="acm-bg-surface-header p-4 rounded-lg shadow-sm w-full">
                            <h4 class="font-bold text-lg mb-2 text-center acm-text-red">Th√¥ng tin chung</h4>
                            <div class="space-y-1 text-sm">
                                <p><strong class="font-semibold acm-text-secondary w-28 inline-block">V·ªã tr√≠:</strong> <span class="acm-text-light">${player.position}</span></p>
                                <p><strong class="font-semibold acm-text-secondary w-28 inline-block">Tu·ªïi:</strong> <span class="acm-text-light">${player.age}</span></p>
                                <p><strong class="font-semibold acm-text-secondary w-28 inline-block">Qu·ªëc t·ªãch:</strong> <span class="acm-text-light">${player.nationality}</span></p>
                                <p><strong class="font-semibold acm-text-secondary w-28 inline-block">H·ª£p ƒë·ªìng:</strong> <span class="acm-text-light">${player.contractUntil}</span></p>
                                <p><strong class="font-semibold acm-text-secondary w-28 inline-block">S·ªë tr·∫≠n:</strong> <span class="acm-text-light">${player.appearances === null ? 'N/A' : player.appearances}</span></p>
                                <p><strong class="font-semibold acm-text-secondary w-28 inline-block">B√†n th·∫Øng:</strong> <span class="acm-text-light">${player.goals === null ? 'N/A' : player.goals}</span></p>
                                <p><strong class="font-semibold acm-text-secondary w-28 inline-block">Ki·∫øn t·∫°o:</strong> <span class="acm-text-light">${player.assists !== undefined && player.assists !== null ? player.assists : 'N/A'}</span></p>
                                <p><strong class="font-semibold acm-text-secondary w-28 inline-block">Gi√° tr·ªã TT:</strong> <span class="acm-text-light">‚Ç¨${formatValue(player.value)}M</span></p>
                                ${player.note ? `<p><strong class="font-semibold acm-text-secondary w-28 inline-block">Ghi ch√∫:</strong> <span class="acm-text-light">${player.note}</span></p>` : ''}
                            </div>
                        </div>
                    </div>
                    <div class="md:col-span-2 acm-bg-surface-header p-4 rounded-lg shadow-sm">
                         ${statsHtml}
                    </div>
                </div>
            `;

            // Display the modal with transition
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            setTimeout(() => {
                if (modal) modal.style.opacity = '1';
                if (modalContent) modalContent.style.transform = 'scale(1)';
            }, 10); // Short delay for CSS transition

            // Destroy existing charts before creating new ones to prevent conflicts
            if (charts.playerRadar) charts.playerRadar.destroy();
            if (charts.playerBar) charts.playerBar.destroy();
            if (charts.goalkeeperBar) charts.goalkeeperBar.destroy();


            const playerStats = player.stats || {}; // Ensure playerStats is an object

            // Initialize the appropriate chart for the player
            if (player.position === 'FW' || player.position === 'MF') {
                initPlayerRadarChart(player.name, playerStats);
            } else if (player.position === 'DF') {
                initPlayerBarChart(player.name, playerStats);
            } else if (player.position === 'GK') {
                initGoalkeeperBarChart(player.name, playerStats);
            }
        }

        // Function to close the player detail modal
        function closeModal() {
            const modal = document.getElementById('player-modal');
            const modalContent = modal.querySelector('.modal-content');
            if (modal) modal.style.opacity = '0';
            if (modalContent) modalContent.style.transform = 'scale(0.95)';

            setTimeout(() => { // Wait for transition to complete
                if (modal) {
                    modal.classList.add('hidden');
                    modal.classList.remove('flex');
                }
            }, 300);
        }

        // Function to initialize general charts (Serie A performance, Revenue)
        function initCharts() {
            Chart.defaults.font.family = 'Inter';
            Chart.defaults.color = '#E0E0E0'; // Light text for chart defaults

            const serieAChartElement = document.getElementById('serieAChart');
            if (serieAChartElement) {
                if (charts.serieA) charts.serieA.destroy();
                const serieA_ctx = serieAChartElement.getContext('2d');
                charts.serieA = new Chart(serieA_ctx, {
                    type: 'bar',
                    data: {
                        labels: AppData.performance.serieA.labels,
                        datasets: [{
                            label: 'ƒêi·ªÉm s·ªë Serie A',
                            data: AppData.performance.serieA.points,
                            backgroundColor: [
                                'rgba(255, 159, 64, 0.7)', // Orange
                                'rgba(229, 57, 53, 0.7)',  // AC Milan Red
                                'rgba(59, 130, 246, 0.7)', // Blue
                                'rgba(34, 197, 94, 0.7)',  // Green
                            ],
                            borderColor: [
                                'rgb(255, 159, 64)',
                                'rgb(229, 57, 53)',
                                'rgb(59, 130, 246)',
                                'rgb(34, 197, 94)',
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            title: { display: true, text: 'So s√°nh ƒëi·ªÉm s·ªë cu·ªëi m√πa', color: '#E0E0E0' }
                        },
                        scales: { 
                            y: { 
                                beginAtZero: true, 
                                suggestedMax: 80,
                                ticks: { color: '#A0A0A0' }, // Axis ticks color
                                grid: { color: 'rgba(224, 224, 224, 0.1)' } // Grid line color
                            },
                            x: {
                                ticks: { color: '#A0A0A0' },
                                grid: { color: 'rgba(224, 224, 224, 0.1)' }
                            }
                        }
                    }
                });
            }


            const revenueChartElement = document.getElementById('revenueChart');
            if (revenueChartElement) {
                if (charts.revenue) charts.revenue.destroy();
                const revenue_ctx = revenueChartElement.getContext('2d');
                charts.revenue = new Chart(revenue_ctx, {
                    type: 'doughnut',
                    data: {
                        labels: AppData.finance.revenue.labels,
                        datasets: [{
                            label: 'C∆° c·∫•u doanh thu (‚Ç¨M)',
                            data: AppData.finance.revenue.data,
                            backgroundColor: [
                                'rgba(229, 57, 53, 0.8)',  // AC Milan Red
                                'rgba(255, 0, 0, 0.6)',    // Lighter Red
                                'rgba(150, 0, 0, 0.7)',    // Darker Red
                            ],
                             borderColor: '#1E1E1E', // Match surface background for separation
                            hoverOffset: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'top', labels: {color: '#E0E0E0'} },
                            title: { display: true, text: 'C∆° c·∫•u doanh thu 2023-2024', color: '#E0E0E0' }
                        }
                    }
                });
            }
        }

        // Function to initialize player-specific radar chart
        function initPlayerRadarChart(playerName, playerStats) {
            const ctx = document.getElementById('playerRadarChart').getContext('2d');
            const dataValues = [
                playerStats.goals || 0,
                playerStats.assists || 0,
                playerStats.xG || 0,
                playerStats.xA || 0,
                (playerStats.keyPasses || 0) > 100 ? (playerStats.keyPasses / 10) : ((playerStats.keyPasses || 0) / 5)
            ];

            charts.playerRadar = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['B√†n th·∫Øng', 'Ki·∫øn t·∫°o', 'xG', 'xA', 'Ch. Quy·∫øt ƒë·ªãnh (scaled)'],
                    datasets: [{
                        label: playerName,
                        data: dataValues,
                        fill: true,
                        backgroundColor: 'rgba(229, 57, 53, 0.4)', // AC Milan Red, more transparent
                        borderColor: 'rgb(229, 57, 53)',      // AC Milan Red
                        pointBackgroundColor: 'rgb(229, 57, 53)',
                        pointBorderColor: '#fff', // White border for points
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(229, 57, 53)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    elements: {
                        line: { tension: 0, borderWidth: 2 }
                    },
                    scales: {
                        r: {
                            angleLines: { display: true, color: 'rgba(224, 224, 224, 0.2)' }, // Lighter angle lines
                            suggestMin: 0,
                            ticks: { 
                                display: true, // SHOW numbers on radial axis
                                backdropColor: 'transparent', 
                                color: '#A0A0A0',
                                stepSize: Math.max(...dataValues.filter(v => typeof v === 'number' && !isNaN(v))) > 10 ? 5 : 2
                            },
                            pointLabels: { // Labels like "B√†n th·∫Øng"
                                display: true,
                                font: { size: 12 },
                                color: '#E0E0E0' // Light text for point labels
                            },
                            grid: { color: 'rgba(224, 224, 224, 0.2)' } // Lighter grid lines
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            enabled: true,
                            backgroundColor: 'rgba(0,0,0,0.8)', // Dark tooltip
                            titleColor: '#E0E0E0',
                            bodyColor: '#E0E0E0',
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) { label += ': '; }
                                    if (context.parsed.r !== null) {
                                        if (context.label === 'Ch. Quy·∫øt ƒë·ªãnh (scaled)') {
                                            label += (playerStats.keyPasses || 0) + ' (Chart: ' + context.parsed.r.toFixed(2) + ')';
                                        } else {
                                            label += context.parsed.r.toFixed(2);
                                        }
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Function to initialize player-specific bar chart (for defenders)
        function initPlayerBarChart(playerName, playerStats) {
            const ctx = document.getElementById('playerBarChart').getContext('2d');
            charts.playerBar = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['T·∫Øc b√≥ng', 'C·∫Øt b√≥ng', 'xA (scaled)'],
                    datasets: [{
                        label: 'Ch·ªâ s·ªë ph√≤ng ng·ª±',
                        data: [playerStats.tackles || 0, playerStats.interceptions || 0, (playerStats.xA || 0) * 10],
                        backgroundColor: 'rgba(229, 57, 53, 0.7)', // AC Milan Red for bars
                        borderColor: 'rgb(229, 57, 53)',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            enabled: true,
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            titleColor: '#E0E0E0',
                            bodyColor: '#E0E0E0',
                             callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) { label += ': '; }
                                    if (context.parsed.x !== null) {
                                        if (context.label === 'xA (scaled)') {
                                            label += (playerStats.xA || 0).toFixed(2) + ' (Chart: ' + context.parsed.x.toFixed(2) + ')';
                                        } else {
                                            label += context.parsed.x.toFixed(2);
                                        }
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            ticks: { color: '#A0A0A0' },
                            grid: { color: 'rgba(224, 224, 224, 0.1)' }
                        },
                        y: {
                            ticks: { color: '#A0A0A0' },
                            grid: { display: false }
                        }
                    }
                }
            });
        }

        // Function to initialize goalkeeper-specific bar chart
        function initGoalkeeperBarChart(playerName, playerStats) {
            const canvasElement = document.getElementById('goalkeeperBarChart');
            if (!canvasElement) return;
            const ctx = canvasElement.getContext('2d');
            if (!ctx) return;

            if (charts.goalkeeperBar) {
                charts.goalkeeperBar.destroy();
            }

            charts.goalkeeperBar = new Chart(ctx, {
                type: 'bar', // Horizontal bar chart for better label readability with few items
                data: {
                    labels: ['C√∫ c·∫£n ph√°', 'B√†n thua'],
                    datasets: [{
                        label: 'Th·ªëng k√™',
                        data: [
                            playerStats.saves || 0,
                            playerStats.goalsConceded || 0
                        ],
                        backgroundColor: [
                            'rgba(229, 57, 53, 0.7)', // AC Milan Red for saves
                            'rgba(100, 100, 100, 0.7)'  // Neutral gray for goals conceded
                        ],
                        borderColor: [
                            'rgb(229, 57, 53)',
                            'rgb(100, 100, 100)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y', // Makes it a horizontal bar chart
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false 
                        },
                        title: {
                            display: false, // Title is already above in statsHtml
                        },
                        tooltip: {
                            enabled: true,
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            titleColor: '#E0E0E0',
                            bodyColor: '#E0E0E0',
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            ticks: { color: '#A0A0A0', stepSize: 10 }, // Adjust stepSize as needed
                            grid: { color: 'rgba(224, 224, 224, 0.1)' }
                        },
                        y: {
                            ticks: { color: '#E0E0E0' }, // Light color for y-axis labels (Saves, Goals Conceded)
                            grid: { display: false }
                        }
                    }
                }
            });
        }


        // Function to render the management table
        function renderManagementTable() {
            const tableBody = document.getElementById('management-table-body');
            if (!tableBody) return;
            tableBody.innerHTML = '';
            AppData.management.forEach(member => {
                const row = document.createElement('tr');
                row.className = 'border-b acm-border-dark';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium acm-text-light">${member.name}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm acm-text-secondary">${member.role}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm acm-text-secondary">${member.affiliation}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Function to render transfer tables (incoming and outgoing)
        function renderTransferTables() {
            const transfersInBody = document.getElementById('transfers-in-table-body');
            const transfersOutBody = document.getElementById('transfers-out-table-body');

            if (transfersInBody && AppData.transfers && AppData.transfers.incoming) {
                transfersInBody.innerHTML = '';
                AppData.transfers.incoming.forEach(player => {
                    const row = document.createElement('tr');
                     row.className = 'border-b acm-border-dark';
                    row.innerHTML = `
                        <td class="px-4 py-2 whitespace-nowrap text-sm font-medium acm-text-light">${player.name} <span class="text-xs text-gray-400">(${player.position})</span></td>
                        <td class="px-4 py-2 whitespace-nowrap text-sm acm-text-secondary hidden sm:table-cell">${player.from}</td>
                        <td class="px-4 py-2 whitespace-nowrap text-sm acm-text-secondary">${player.fee}</td>
                    `;
                    transfersInBody.appendChild(row);
                });
            }

            if (transfersOutBody && AppData.transfers && AppData.transfers.outgoing) {
                transfersOutBody.innerHTML = '';
                AppData.transfers.outgoing.forEach(player => {
                    const row = document.createElement('tr');
                    row.className = 'border-b acm-border-dark';
                    row.innerHTML = `
                        <td class="px-4 py-2 whitespace-nowrap text-sm font-medium acm-text-light">${player.name} <span class="text-xs text-gray-400">(${player.position})</span></td>
                        <td class="px-4 py-2 whitespace-nowrap text-sm acm-text-secondary hidden sm:table-cell">${player.to}</td>
                        <td class="px-4 py-2 whitespace-nowrap text-sm acm-text-secondary">${player.fee}</td>
                    `;
                    transfersOutBody.appendChild(row);
                });
            }
        }

        // Main script execution after DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.app-section');
            const mobileNav = document.getElementById('mobile-nav');

            // Function to switch between tabs/sections
            function switchTab(targetId) {
                sections.forEach(section => {
                    section.classList.toggle('hidden', section.id !== targetId);
                });

                navLinks.forEach(link => {
                    link.classList.toggle('active', link.dataset.target === targetId);
                });
                
                // Initialize charts only when the respective tab is active and elements are visible
                if (targetId === 'performance' && document.getElementById('serieAChart')) {
                    setTimeout(() => initCharts(), 0); // initCharts handles both Serie A and Revenue
                }
                if (targetId === 'off-pitch') {
                     setTimeout(() => {
                        if(document.getElementById('revenueChart')) initCharts(); // Re-init if needed, or ensure it's already done
                        renderManagementTable();
                        renderTransferTables();
                    },0);
                }
                 if (targetId === 'squad') {
                    renderSquadTable(AppData.squad);
                }

                if(mobileNav) mobileNav.value = targetId;
                window.scrollTo(0, 0); // Scroll to top on tab switch
            }

            // Event listeners for desktop navigation
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    // Ensure we get the correct target from the link, even if an icon inside is clicked
                    const targetLink = e.target.closest('.nav-link');
                    if (targetLink) {
                        switchTab(targetLink.dataset.target);
                    }
                });
            });

            // Event listener for mobile navigation
            if(mobileNav) mobileNav.addEventListener('change', (e) => {
                switchTab(e.target.value);
            });

            // Event listener for position filter in squad section
            const positionFilter = document.getElementById('position-filter');
            if(positionFilter) positionFilter.addEventListener('change', (e) => {
                applySquadFilters();
            });

            // Event listener for name search in squad section
            const nameSearch = document.getElementById('name-search');
            if(nameSearch) nameSearch.addEventListener('input', (e) => {
                applySquadFilters();
            });
            
            function applySquadFilters() {
                const position = positionFilter ? positionFilter.value : 'all';
                const nameQuery = nameSearch ? nameSearch.value.toLowerCase() : '';
                let filteredData = AppData.squad;

                if (position !== 'all') {
                    filteredData = filteredData.filter(p => p.position === position);
                }
                if (nameQuery) {
                    filteredData = filteredData.filter(p => p.name.toLowerCase().includes(nameQuery));
                }
                renderSquadTable(filteredData);
            }


            // Event listeners for table header sorting
            document.querySelectorAll('.table-header-sortable').forEach(header => {
                header.addEventListener('click', (e) => {
                    const column = e.currentTarget.dataset.sort;
                    if (currentSort.column === column) {
                        currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
                    } else {
                        currentSort.column = column;
                        currentSort.direction = 'asc';
                    }
                    applySquadFilters(); // Re-render table with new sort
                });
            });

            // Event listeners for player modal
            document.getElementById('close-modal-btn').addEventListener('click', closeModal);
            document.getElementById('player-modal').addEventListener('click', (e) => {
                if (e.target === e.currentTarget) { // Close if backdrop is clicked
                    closeModal();
                }
            });

            // Initial setup: display the default tab
            const initialTab = 'overview'; 
            switchTab(initialTab);
             // Set the first nav link as active if no specific logic for initial active tab
            if (navLinks.length > 0 && !document.querySelector('.nav-link.active')) {
                 const activeLink = Array.from(navLinks).find(link => link.dataset.target === initialTab);
                if (activeLink) {
                    activeLink.classList.add('active');
                } else if (navLinks[0]) { 
                     navLinks[0].classList.add('active');
                }
            }
        });
    </script>
</body>

</html>
