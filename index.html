<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AC Milan 2024-2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Visualization & Content Choices: 
        - Revenue/Sponsorship Breakdown: Goal: Show proportions. Method: Donut Chart (Chart.js). Interaction: Hover. Justification: Clear for part-to-whole analysis.
        - Performance Overview: Goal: Compare. Method: Custom HTML/Tailwind trophy case. Interaction: Static visual. Justification: Provides a quick, impactful summary of the season's contrasting results.
        - Squad Data: Goal: Organize & Compare. Method: Filterable/Sortable HTML Table (JS). Interaction: Filter, Sort, Click for detail. Justification: The most effective method for exploring and comparing a large roster of players.
        - Detailed Player Stats: Goal: Organize & Compare metrics for one player. Method: Radar Chart (Chart.js). Interaction: Hover. Justification: Excellent for multivariate comparison on a single entity.
        - Coaching Timeline: Goal: Show change. Method: HTML/Tailwind diagram. Interaction: Static visual. Justification: Clearly illustrates instability.
        All visualizations are rendered on Canvas via Chart.js, with textual content presented in styled cards for context. -->
    <style>
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 320px; max-height: 40vh; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        .nav-link { transition: color 0.3s, border-color 0.3s; }
        .nav-link.active { color: #E53935; border-bottom-color: #E53935; }
        .nav-link:not(.active) { border-bottom-color: transparent; }
        .modal-backdrop { transition: opacity 0.3s ease-in-out; }
        .modal-content { transition: transform 0.3s ease-in-out; }
        .table-header-sortable { cursor: pointer; }
        .table-header-sortable:hover { background-color: #f0f0f0; }
        .table-row-clickable { cursor: pointer; transition: background-color 0.2s; }
        .table-row-clickable:hover { background-color: #fcebeb; }
        .tournament-logo { width: 24px; height: 24px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-weight: bold; color: white; margin-right: 8px; }
        .serie-a-logo { background-color: #0055A4; } /* Blue for Serie A */
        .champions-league-logo { background-color: #001E5A; } /* Dark blue for UCL */
        .coppa-italia-logo { background-color: #009246; } /* Green for Coppa Italia */
        .supercoppa-logo { background-color: #CEB888; } /* Gold for Supercoppa */

        .timeline { list-style-type: none; padding-left: 0; position: relative; }
        .timeline:before { content: ''; background: #d4d9df; display: inline-block; position: absolute; left: 10px; width: 2px; height: 100%; z-index: 0; }
        .timeline-item { margin: 20px 0; padding-left: 40px; position: relative; }
        .timeline-item:before { content: ''; background: white; border: 2px solid #E53935; display: inline-block; position: absolute; border-radius: 50%; left: 0px; width: 24px; height: 24px; z-index: 1; text-align: center; line-height: 20px; font-size: 12px; }
        .timeline-item-content { background-color: #fff; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .timeline-item-title { font-weight: bold; margin-bottom: 5px; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-3">
                    <img src="https://placehold.co/40x40/FF0000/FFFFFF?text=ACM" alt="AC Milan Logo" class="h-8 w-8 rounded-full">
                    <h1 class="text-lg md:text-xl font-bold text-slate-900">Milan 2024-25</h1>
                </div>
                <div class="hidden md:flex items-center space-x-2 md:space-x-4">
                    <a href="#overview" data-target="overview" class="nav-link text-sm md:text-base font-medium text-slate-600 hover:text-red-600 py-2 border-b-2">üìÑ T·ªïng Quan</a>
                    <a href="#performance" data-target="performance" class="nav-link text-sm md:text-base font-medium text-slate-600 hover:text-red-600 py-2 border-b-2">üìä Th√†nh T√≠ch</a>
                    <a href="#off-pitch" data-target="off-pitch" class="nav-link text-sm md:text-base font-medium text-slate-600 hover:text-red-600 py-2 border-b-2">üíº T√†i Ch√≠nh & H·∫≠u Tr∆∞·ªùng</a>
                    <a href="#squad" data-target="squad" class="nav-link text-sm md:text-base font-medium text-slate-600 hover:text-red-600 py-2 border-b-2">üë• ƒê·ªôi H√¨nh</a>
                </div>
                <div class="md:hidden">
                    <select id="mobile-nav" class="bg-gray-200 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5">
                        <option value="overview">üìÑ T·ªïng Quan</option>
                        <option value="performance">üìä Th√†nh T√≠ch</option>
                        <option value="off-pitch">üíº T√†i Ch√≠nh & H·∫≠u Tr∆∞·ªùng</option>
                        <option value="squad">üë• ƒê·ªôi H√¨nh</option>
                    </select>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-8">
        
        <section id="overview" class="app-section space-y-8">
            <div>
                <h2 class="text-3xl font-bold text-slate-900 flex items-center"><span class="mr-2 text-2xl">üìÑ</span>M√πa Gi·∫£i C·ªßa Nh·ªØng Th√°i C·ª±c</h2>
                <p class="mt-2 text-lg text-slate-600">M√πa gi·∫£i 2024-2025 c·ªßa AC Milan l√† m·ªôt b·ª©c tranh ph·ª©c t·∫°p, n∆°i vinh quang t·∫°i c√°c gi·∫£i ƒë·∫•u c√∫p kh√¥ng th·ªÉ che l·∫•p ƒëi n·ªói th·∫•t v·ªçng t·∫°i Serie A. B√°o c√°o n√†y ph√¢n t√≠ch s√¢u v·ªÅ m·ªôt nƒÉm ƒë·∫ßy bi·∫øn ƒë·ªông c·ªßa Rossoneri, t·ª´ s√¢n c·ªè ƒë·∫øn ph√≤ng h·ªçp.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="bg-white p-5 rounded-xl shadow-md">
                    <h3 class="font-semibold text-slate-500 flex items-center"><div class="tournament-logo serie-a-logo">SA</div>V·ªã tr√≠ Serie A</h3>
                    <p class="text-4xl font-bold text-red-700 mt-2">H·∫°ng 8</p>
                    <p class="text-sm text-slate-500 mt-1">Kh√¥ng ƒë·ªß ƒëi·ªÅu ki·ªán d·ª± c√∫p Ch√¢u √Çu</p>
                </div>
                <div class="bg-white p-5 rounded-xl shadow-md">
                    <h3 class="font-semibold text-slate-500 flex items-center"><div class="tournament-logo supercoppa-logo">SI</div>Supercoppa Italiana</h3>
                    <p class="text-4xl font-bold text-green-600 mt-2">V√¥ ƒê·ªãch</p>
                    <p class="text-sm text-slate-500 mt-1">ƒê√°nh b·∫°i Inter Milan 3-2</p>
                </div>
                <div class="bg-white p-5 rounded-xl shadow-md">
                    <h3 class="font-semibold text-slate-500">Vua Ph√° L∆∞·ªõi (M·ªçi ƒê·∫•u Tr∆∞·ªùng)</h3>
                    <p class="text-4xl font-bold text-slate-800 mt-2">17</p>
                    <p class="text-sm text-slate-500 mt-1">Christian Pulisic</p>
                </div>
                <div class="bg-white p-5 rounded-xl shadow-md">
                    <h3 class="font-semibold text-slate-500">Gi√° Tr·ªã CLB (Forbes 2025)</h3>
                    <p class="text-4xl font-bold text-slate-800 mt-2">$1.5 t·ª∑</p>
                    <p class="text-sm text-green-600 mt-1">‚ñ≤ 5% so v·ªõi nƒÉm tr∆∞·ªõc</p>
                </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-md">
                <h3 class="text-2xl font-bold mb-4">S·ª± T∆∞∆°ng Ph·∫£n C·ªßa M√πa Gi·∫£i</h3>
                <p class="mb-6 text-slate-600">Th√†nh c√¥ng ·ªü c√°c gi·∫£i ƒë·∫•u c√∫p m·ªôt tr·∫≠n v√† s·ª± b·∫•t ·ªïn trong cu·ªôc ƒëua ƒë∆∞·ªùng d√†i ·ªü gi·∫£i VƒêQG ƒë√£ ƒë·ªãnh h√¨nh n√™n m·ªôt m√πa gi·∫£i kh√≥ ƒëo√°n c·ªßa Milan. ƒê·ªôi b√≥ng c√≥ th·ªÉ thi ƒë·∫•u thƒÉng hoa trong c√°c tr·∫≠n ƒë·∫•u knock-out nh∆∞ng l·∫°i thi·∫øu ƒëi s·ª± nh·∫•t qu√°n c·∫ßn thi·∫øt ƒë·ªÉ c·∫°nh tranh cho Scudetto, d·∫´n ƒë·∫øn s·ª± h·ª•t h·∫´ng l·ªõn cho ng∆∞·ªùi h√¢m m·ªô.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="border-l-4 border-green-500 pl-4">
                        <h4 class="font-bold text-xl text-green-600">ƒêi·ªÉm S√°ng</h4>
                        <ul class="list-disc list-inside mt-2 space-y-1 text-slate-700">
                            <li>V√¥ ƒë·ªãch Supercoppa Italiana l·∫ßn th·ª© 8.</li>
                            <li>L·ªçt v√†o chung k·∫øt Coppa Italia.</li>
                            <li>Christian Pulisic v√† Tijjani Reijnders t·ªèa s√°ng.</li>
                            <li>Ti·∫øp t·ª•c trao c∆° h·ªôi cho c√°c t√†i nƒÉng tr·∫ª.</li>
                            <li>B·∫•t b·∫°i tr∆∞·ªõc Inter Milan ·ªü c√°c tr·∫≠n derby.</li>
                        </ul>
                    </div>
                    <div class="border-l-4 border-red-500 pl-4">
                        <h4 class="font-bold text-xl text-red-600">N·ªói Th·∫•t V·ªçng</h4>
                        <ul class="list-disc list-inside mt-2 space-y-1 text-slate-700">
                            <li>Ch·ªâ k·∫øt th√∫c ·ªü v·ªã tr√≠ th·ª© 8 t·∫°i Serie A.</li>
                            <li>B·ªã lo·∫°i s·ªõm kh·ªèi Champions League.</li>
                            <li>Thua chung k·∫øt Coppa Italia tr∆∞·ªõc Bologna.</li>
                            <li>B·∫•t ·ªïn tr√™n bƒÉng gh·∫ø hu·∫•n luy·ªán.</li>
                        </ul>
                    </div>
                </div>
            </div>

        </section>

        <section id="performance" class="app-section space-y-8 hidden">
             <div>
                <h2 class="text-3xl font-bold text-slate-900 flex items-center"><span class="mr-2 text-2xl">üìä</span>Ph√¢n T√≠ch Th√†nh T√≠ch</h2>
                <p class="mt-2 text-lg text-slate-600">Kh√°m ph√° h√†nh tr√¨nh c·ªßa AC Milan qua b·ªën ƒë·∫•u tr∆∞·ªùng ch√≠nh trong m√πa gi·∫£i 2024-2025: t·ª´ vinh quang c√∫p qu·ªëc n·ªôi ƒë·∫øn s·ª± sa s√∫t ·ªü gi·∫£i VƒêQG v√† ƒë·∫•u tr∆∞·ªùng ch√¢u √Çu.</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="text-2xl font-bold mb-1 flex items-center"><div class="tournament-logo serie-a-logo">SA</div>Serie A: M√πa Gi·∫£i ƒê·∫ßy Th·ª≠ Th√°ch</h3>
                    <p class="text-slate-600 mb-4">K·∫øt th√∫c ·ªü v·ªã tr√≠ th·ª© 8 v·ªõi 63 ƒëi·ªÉm l√† m·ªôt k·∫øt qu·∫£ ƒë√°ng th·∫•t v·ªçng, cho th·∫•y s·ª± thi·∫øu ·ªïn ƒë·ªãnh nghi√™m tr·ªçng trong su·ªët 38 v√≤ng ƒë·∫•u.</p>
                    <div class="chart-container">
                        <canvas id="serieAChart"></canvas>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="text-2xl font-bold mb-4 flex items-center"><div class="tournament-logo champions-league-logo">CL</div>Champions League: D·ª´ng B∆∞·ªõc S·ªõm</h3>
                    <p class="text-slate-600 mb-4">D√π ƒë√£ v∆∞·ª£t qua v√≤ng b·∫£ng, Milan ƒë√£ b·ªã Feyenoord lo·∫°i ·ªü v√≤ng play-off, m·ªôt k·∫øt qu·∫£ d∆∞·ªõi k·ª≥ v·ªçng cho m·ªôt CLB gi√†u truy·ªÅn th·ªëng ch√¢u √Çu.</p>
                    <div class="flex flex-col space-y-4">
                        <div class="text-center p-4 bg-slate-100 rounded-lg">
                            <p class="font-semibold text-slate-500">Giai ƒëo·∫°n</p>
                            <p class="text-xl font-bold text-slate-800">V√≤ng Play-off ƒê·∫•u lo·∫°i tr·ª±c ti·∫øp</p>
                        </div>
                        <div class="text-center p-4 bg-red-50 rounded-lg">
                            <p class="font-semibold text-red-500">K·∫øt qu·∫£</p>
                            <p class="text-xl font-bold text-red-800">B·ªã lo·∫°i b·ªüi Feyenoord (T·ªïng t·ª∑ s·ªë 1-2)</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h3 class="text-2xl font-bold mb-4 flex items-center"><div class="tournament-logo coppa-italia-logo">CI</div>Coppa Italia: H√†nh Tr√¨nh ƒê·∫øn Chung K·∫øt</h3>
                     <p class="text-slate-600 mb-4">Milan ƒë√£ th·ªÉ hi·ªán b·∫£n lƒ©nh ·ªü c√°c tr·∫≠n ƒë·∫•u lo·∫°i tr·ª±c ti·∫øp, v∆∞·ª£t qua c√°c ƒë·ªëi th·ªß m·∫°nh ƒë·ªÉ v√†o chung k·∫øt, nh∆∞ng l·∫°i g·ª•c ng√£ ·ªü ng∆∞·ª°ng c·ª≠a thi√™n ƒë∆∞·ªùng.</p>
                     <ul class="timeline">
                        <li class="timeline-item">
                            <div class="timeline-item-content">
                                <h4 class="timeline-item-title">V√≤ng 16 ƒë·ªôi</h4>
                                <p>vs Sassuolo <strong class="text-green-600">(Th·∫Øng 6-1)</strong></p>
                            </div>
                        </li>
                        <li class="timeline-item">
                            <div class="timeline-item-content">
                                <h4 class="timeline-item-title">T·ª© k·∫øt</h4>
                                <p>vs AS Roma <strong class="text-green-600">(Th·∫Øng 3-1)</strong></p>
                            </div>
                        </li>
                        <li class="timeline-item">
                            <div class="timeline-item-content">
                                <h4 class="timeline-item-title">B√°n k·∫øt</h4>
                                <p>vs Inter Milan <strong class="text-green-600">(Th·∫Øng chung cu·ªôc 4-1)</strong></p>
                            </div>
                        </li>
                        <li class="timeline-item">
                            <div class="timeline-item-content">
                                <h4 class="timeline-item-title">Chung k·∫øt</h4>
                                <p>vs Bologna <strong class="text-red-600">(Thua 0-1)</strong></p>
                            </div>
                        </li>
                    </ul>
                </div>
                 <div class="bg-white p-6 rounded-xl shadow-md flex flex-col">
                    <h3 class="text-2xl font-bold mb-4 flex items-center"><div class="tournament-logo supercoppa-logo">SI</div>Supercoppa Italiana: Tia S√°ng An ·ª¶i</h3>
                    <p class="text-slate-600 mb-4">Chi·∫øn th·∫Øng thuy·∫øt ph·ª•c tr∆∞·ªõc ƒë·∫°i k√¨nh ƒë·ªãch Inter Milan ƒë√£ mang v·ªÅ danh hi·ªáu duy nh·∫•t c·ªßa m√πa gi·∫£i, m·ªôt ni·ªÅm vui hi·∫øm hoi cho c√°c Milanista.</p>
                     <div class="flex-grow flex flex-col items-center justify-center text-center p-4 bg-amber-50 rounded-lg">
                        <span class="text-6xl text-amber-500">üèÜ</span>
                        <p class="text-3xl font-bold text-slate-800 mt-4">V√î ƒê·ªäCH</p>
                        <p class="text-lg text-slate-600">ƒê√°nh b·∫°i Inter Milan 3-2</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="off-pitch" class="app-section space-y-8 hidden">
            <div>
                <h2 class="text-3xl font-bold text-slate-900 flex items-center"><span class="mr-2 text-2xl">üíº</span>T√†i Ch√≠nh & H·∫≠u Tr∆∞·ªùng</h2>
                <p class="mt-2 text-lg text-slate-600">Nh·ªØng bi·∫øn ƒë·ªông tr√™n s√¢n c·ªè song h√†nh c√πng c√°c v·∫•n ƒë·ªÅ v·ªÅ t√†i ch√≠nh v√† m·ªëi quan h·ªá cƒÉng th·∫≥ng v·ªõi ng∆∞·ªùi h√¢m m·ªô. Kh√°m ph√° nh·ªØng ƒë·ªông l·ª±c ngo√†i s√¢n c·ªè ƒë·ªãnh h√¨nh m√πa gi·∫£i c·ªßa Milan.</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                <div class="lg:col-span-3 bg-white p-6 rounded-xl shadow-md">
                    <h3 class="text-2xl font-bold mb-1">S·ª©c Kh·ªèe Kinh T·∫ø</h3>
                    <p class="text-slate-600 mb-4">D√π gi√° tr·ªã CLB tƒÉng, vi·ªác kh√¥ng ƒë∆∞·ª£c d·ª± c√∫p Ch√¢u √Çu m√πa t·ªõi s·∫Ω t·∫°o ra √°p l·ª±c t√†i ch√≠nh l·ªõn, d·ª± ki·∫øn g√¢y th√¢m h·ª•t ƒë√°ng k·ªÉ.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="p-4 bg-slate-100 rounded-lg">
                            <h4 class="font-medium text-slate-500">Doanh thu 2023-24</h4>
                            <p class="text-2xl font-bold text-slate-800">‚Ç¨397.6M</p>
                        </div>
                        <div class="p-4 bg-red-50 rounded-lg">
                            <h4 class="font-medium text-red-500">L·ªó d·ª± ki·∫øn 24-25</h4>
                            <p class="text-2xl font-bold text-red-700">~ ‚Ç¨25M</p>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>
                <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-md">
                    <h3 class="text-2xl font-bold mb-1">M·ªëi Quan H·ªá v·ªõi Ng∆∞·ªùi H√¢m M·ªô</h3>
                    <p class="text-slate-600 mb-4">S·ª± b·∫•t m√£n l√™n ƒë·∫øn ƒë·ªânh ƒëi·ªÉm v·ªõi c√°c cu·ªôc bi·ªÉu t√¨nh c·ªßa Curva Sud nh·∫Øm v√†o ch·ªß s·ªü h·ªØu RedBird, ph·∫£n √°nh s·ª± m·∫•t k·∫øt n·ªëi gi·ªØa CƒêV v√† ban l√£nh ƒë·∫°o.</p>
                    <blockquote class="border-l-4 border-black pl-4 py-2 bg-gray-100">
                        <p class="text-xl font-semibold italic text-slate-800">"Go Home"</p>
                        <footer class="text-slate-600 mt-2">‚Äî Th√¥ng ƒëi·ªáp t·ª´ c√°c Ultras trong tr·∫≠n ƒë·∫•u cu·ªëi c√πng c·ªßa m√πa gi·∫£i.</footer>
                    </blockquote>
                    <h4 class="font-semibold mt-6 mb-2">C√°c b·∫•t b√¨nh ch√≠nh:</h4>
                    <ul class="list-disc list-inside space-y-1 text-slate-700">
                        <li>Th√†nh t√≠ch m√πa gi·∫£i ƒë√°ng th·∫•t v·ªçng.</li>
                        <li>Thi·∫øu ƒë·∫ßu t∆∞ v√† tham v·ªçng r√µ r√†ng t·ª´ ch·ªß s·ªü h·ªØu.</li>
                        <li>Sa th·∫£i huy·ªÅn tho·∫°i Paolo Maldini.</li>
                        <li>S·ª± m·∫•t k·∫øt n·ªëi v·ªõi b·∫£n s·∫Øc CLB.</li>
                    </ul>
                </div>
            </div>
             <div class="bg-white p-6 rounded-xl shadow-md">
                <h3 class="text-2xl font-bold mb-4">Ban Hu·∫•n Luy·ªán: Chi·∫øc Gh·∫ø N√≥ng</h3>
                 <p class="text-slate-600 mb-6">S·ª± b·∫•t ·ªïn ·ªü v·ªã tr√≠ HLV l√† m·ªôt trong nh·ªØng nguy√™n nh√¢n ch√≠nh d·∫´n ƒë·∫øn th√†nh t√≠ch k√©m c·ªèi. Vi·ªác thay t∆∞·ªõng gi·ªØa d√≤ng v√† c√¥ng b·ªë HLV m·ªõi cho m√πa sau ngay l·∫≠p t·ª©c cho th·∫•y s·ª± thi·∫øu ki√™n nh·∫´n v√† t·∫ßm nh√¨n d√†i h·∫°n.</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-center text-center">
                    <div>
                        <img src="https://placehold.co/100x100/EEEEEE/333333?text=Fonseca" alt="Paulo Fonseca" class="w-24 h-24 mx-auto rounded-full mb-2 object-cover">
                        <b class="block">Paulo Fonseca</b>
                        <span class="text-xs text-slate-600">ƒê·∫ßu m√πa gi·∫£i - 29/12/2024</span>
                    </div>
                    <div class="text-2xl text-slate-400 hidden md:block">&rarr;</div>
                    <div class="md:hidden text-2xl text-slate-400 my-2">&darr;</div>
                    <div>
                        <img src="https://placehold.co/100x100/EEEEEE/333333?text=Concei√ß√£o" alt="S√©rgio Concei√ß√£o" class="w-24 h-24 mx-auto rounded-full mb-2 object-cover">
                        <b class="block">S√©rgio Concei√ß√£o</b>
                        <span class="text-xs text-slate-600">30/12/2024 - Cu·ªëi m√πa gi·∫£i</span>
                    </div>
                    <div class="text-2xl text-slate-400 hidden md:block">&rarr;</div>
                     <div class="md:hidden text-2xl text-slate-400 my-2">&darr;</div>
                    <div>
                        <img src="https://placehold.co/100x100/E53935/FFFFFF?text=Allegri" alt="Massimiliano Allegri" class="w-24 h-24 mx-auto rounded-full mb-2 object-cover border-2 border-red-600">
                        <b class="block">Massimiliano Allegri</b>
                        <span class="text-xs text-slate-600">B·ªï nhi·ªám cho m√πa 2025/26</span>
                    </div>
                </div>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-md">
                <h3 class="text-2xl font-bold mb-4">Th√†nh Ph·∫ßn Ban L√£nh ƒê·∫°o (T√≠nh ƒë·∫øn 02/06/2025)</h3>
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">T√™n</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ch·ª©c V·ª•/Vai Tr√≤</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Li√™n K·∫øt</th>
                            </tr>
                        </thead>
                        <tbody id="management-table-body" class="bg-white divide-y divide-gray-200">
                            
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="squad" class="app-section space-y-8 hidden">
            <div>
                <h2 class="text-3xl font-bold text-slate-900 flex items-center"><span class="mr-2 text-2xl">üë•</span>Ph√¢n T√≠ch ƒê·ªôi H√¨nh</h2>
                <p class="mt-2 text-lg text-slate-600">Kh√°m ph√° chi ti·∫øt t·ª´ng c·∫ßu th·ªß trong ƒë·ªôi h√¨nh AC Milan m√πa gi·∫£i 2024-2025. S·ª≠ d·ª•ng b·ªô l·ªçc ƒë·ªÉ xem theo v·ªã tr√≠ v√† s·∫Øp x·∫øp theo c√°c ch·ªâ s·ªë kh√°c nhau. Nh·∫•p v√†o m·ªôt c·∫ßu th·ªß ƒë·ªÉ xem ph√¢n t√≠ch s√¢u h∆°n.</p>
            </div>
            <div class="bg-white p-4 sm:p-6 rounded-xl shadow-md">
                <div class="flex flex-col sm:flex-row items-center justify-between mb-4 gap-4">
                    <div class="w-full sm:w-auto">
                        <label for="position-filter" class="text-sm font-medium text-slate-700 mr-2">L·ªçc theo v·ªã tr√≠:</label>
                        <select id="position-filter" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 p-2">
                            <option value="all">T·∫•t c·∫£</option>
                            <option value="GK">Th·ªß m√¥n (GK)</option>
                            <option value="DF">H·∫≠u v·ªá (DF)</option>
                            <option value="MF">Ti·ªÅn v·ªá (MF)</option>
                            <option value="FW">Ti·ªÅn ƒë·∫°o (FW)</option>
                        </select>
                    </div>
                     <div class="w-full sm:w-auto">
                        <input type="text" id="name-search" placeholder="T√¨m ki·∫øm theo t√™n..." class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 p-2 w-full">
                    </div>
                </div>

                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left text-slate-500">
                        <thead class="text-xs text-slate-700 uppercase bg-slate-100">
                            <tr>
                                <th scope="col" class="px-6 py-3 table-header-sortable" data-sort="name">C·∫ßu th·ªß</th>
                                <th scope="col" class="px-6 py-3 table-header-sortable hidden md:table-cell" data-sort="age">Tu·ªïi</th>
                                <th scope="col" class="px-6 py-3 table-header-sortable" data-sort="appearances">S·ªë tr·∫≠n</th>
                                <th scope="col" class="px-6 py-3 table-header-sortable" data-sort="goals">B√†n th·∫Øng</th>
                                <th scope="col" class="px-6 py-3 table-header-sortable" data-sort="value">Gi√° tr·ªã TT (‚Ç¨M)</th>
                            </tr>
                        </thead>
                        <tbody id="squad-table-body">
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

    </main>

    <div id="player-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 items-center justify-center hidden modal-backdrop">
        <div class="bg-slate-50 rounded-xl shadow-2xl w-11/12 max-w-4xl max-h-[90vh] overflow-y-auto m-8 modal-content transform scale-95">
            <div class="sticky top-0 bg-slate-50 p-4 border-b border-slate-200 flex justify-between items-center z-10">
                <h3 id="modal-player-name" class="text-2xl font-bold"></h3>
                <button id="close-modal-btn" class="text-slate-500 hover:text-slate-800 text-3xl leading-none">&times;</button>
            </div>
            <div id="modal-body" class="p-6 space-y-6">
            </div>
        </div>
    </div>

    <script>
        const AppData = {
            squad: [
                { id: 1, name: 'Mike Maignan', position: 'GK', age: 29, appearances: 53, goals: 0, assists: 0, value: 25.0, nationality: 'Ph√°p', contractUntil: '2026', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Maignan', stats: {cleanSheets: 15, goals: 0, assists: 0, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
                { id: 2, name: 'Marco Sportiello', position: 'GK', age: 33, appearances: 3, goals: 0, assists: 0, value: 0.5, nationality: '√ù', contractUntil: '2027', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Sportiello', stats: {cleanSheets: 0, goals: 0, assists: 0, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
                { id: 3, name: 'Lorenzo Torriani', position: 'GK', age: 20, appearances: 2, goals: 0, assists: 0, value: 0.1, nationality: '√ù', contractUntil: '2027', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Torriani', stats: {cleanSheets: 0, goals: 0, assists: 0, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
                { id: 4, name: 'Th√©o Hernandez', position: 'DF', age: 27, appearances: 49, goals: 5, assists: 4, value: 40.0, nationality: 'Ph√°p', contractUntil: '2026', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Theo+H.', stats: {goals: 5, assists: 4, xG:3.17, xA:5.34, keyPasses:0, tackles:60, interceptions:35} },
                { id: 5, name: '√Ålex Jim√©nez', position: 'DF', age: 20, appearances: 28, goals: 0, assists: 2, value: 10.0, nationality: 'T√¢y Ban Nha', contractUntil: '2028', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Jimenez', stats: {goals: 0, assists: 2, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
                { id: 6, name: 'Emerson Royal', position: 'DF', age: 26, appearances: 26, goals: 0, assists: 0, value: 10.0, nationality: 'Brazil', contractUntil: '2028', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Emerson', stats: {goals: 0, assists: 0, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
                { id: 7, name: 'Fikayo Tomori', position: 'DF', age: 27, appearances: 36, goals: 0, assists: 2, value: 20.0, nationality: 'Anh', contractUntil: '2027', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Tomori', stats: {goals: 0, assists: 2, xG:0.1, xA:0.43, keyPasses:0, tackles:55, interceptions:45} },
                { id: 8, name: 'Alessandro Florenzi', position: 'DF', age: 34, appearances: 1, goals: 0, assists: 0, value: 1.0, nationality: '√ù', contractUntil: '2025', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Florenzi', stats: {goals: 0, assists: 0, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
                { id: 9, name: 'Malick Thiaw', position: 'DF', age: 23, appearances: 31, goals: 1, assists: 0, value: 20.0, nationality: 'ƒê·ª©c', contractUntil: '2027', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Thiaw', stats: {goals: 1, assists: 0, xG:0, xA:0.2, keyPasses:0, tackles:40, interceptions:30} },
                { id: 10, name: 'Strahinja Pavloviƒá', position: 'DF', age: 24, appearances: 35, goals: 2, assists: 0, value: 18.0, nationality: 'Serbia', contractUntil: '2028', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Pavlovic', stats: {goals: 2, assists: 0, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
                { id: 11, name: 'Kyle Walker', position: 'DF', age: 35, appearances: 16, goals: 0, assists: 0, value: 5.0, nationality: 'Anh', contractUntil: '2025', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Walker', note: 'Cho m∆∞·ª£n (Man City)', stats: {goals: 0, assists: 0, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
                { id: 12, name: 'Davide Bartesaghi', position: 'DF', age: 19, appearances: 7, goals: 0, assists: 0, value: 1.5, nationality: '√ù', contractUntil: '2026', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Bartesaghi', stats: {goals: 0, assists: 0, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
                { id: 13, name: 'Filippo Terracciano', position: 'DF', age: 22, appearances: 17, goals: 0, assists: 0, value: 7.0, nationality: '√ù', contractUntil: '2029', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Terracciano', stats: {goals: 0, assists: 0, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
                { id: 14, name: 'Matteo Gabbia', position: 'DF', age: 25, appearances: 36, goals: 2, assists: 0, value: 8.0, nationality: '√ù', contractUntil: '2029', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Gabbia', stats: {goals: 2, assists: 0, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
                { id: 15, name: 'Ruben Loftus-Cheek', position: 'MF', age: 29, appearances: 28, goals: 0, assists: 0, value: 16.0, nationality: 'Anh', contractUntil: '2027', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Loftus-C', stats: {goals: 0, assists: 0, xG:0.7, xA:1.9, keyPasses:20, tackles:0, interceptions:0} },
                { id: 16, name: 'Tijjani Reijnders', position: 'MF', age: 26, appearances: 54, goals: 15, assists: 6, value: 50.0, nationality: 'H√† Lan', contractUntil: '2027', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Reijnders', stats: {goals: 15, assists: 6, xG:7.5, xA:5.0, keyPasses:117, tackles:0, interceptions:0} },
                { id: 17, name: 'Youssouf Fofana', position: 'MF', age: 25, appearances: 52, goals: 1, assists: 8, value: 30.0, nationality: 'Ph√°p', contractUntil: '2028', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Fofana', stats: {goals: 1, assists: 8, xG:1.5, xA:4.0, keyPasses:45, tackles:0, interceptions:0} },
                { id: 18, name: 'Mattia Liberali', position: 'MF', age: 18, appearances: 1, goals: 0, assists: 0, value: 0.5, nationality: '√ù', contractUntil: '2027', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Liberali', stats: {goals: 0, assists: 0, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
                { id: 19, name: 'Warren Bondo', position: 'MF', age: 21, appearances: 5, goals: 0, assists: 0, value: 10.0, nationality: 'Ph√°p', contractUntil: '2029', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Bondo', stats: {goals: 0, assists: 0, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
                { id: 20, name: 'Yunus Musah', position: 'MF', age: 22, appearances: 40, goals: 0, assists: 0, value: 22.0, nationality: 'M·ªπ', contractUntil: '2028', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Musah', stats: {goals: 0, assists: 0, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
                { id: 21, name: 'Santiago Gim√©nez', position: 'FW', age: 24, appearances: 19, goals: 6, assists: 3, value: 37.0, nationality: 'Mexico', contractUntil: '2029', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Gimenez', stats: {goals: 6, assists: 3, xG:4.8, xA:0.9, keyPasses:15, tackles:0, interceptions:0} },
                { id: 22, name: 'Luka Joviƒá', position: 'FW', age: 27, appearances: 17, goals: 4, assists: 0, value: 2.5, nationality: 'Serbia', contractUntil: '2025', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Jovic', stats: {goals: 4, assists: 0, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
                { id: 23, name: 'Rafael Le√£o', position: 'FW', age: 26, appearances: 49, goals: 12, assists: 9, value: 75.0, nationality: 'B·ªì ƒê√†o Nha', contractUntil: '2028', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Leao', stats: {goals: 12, assists: 9, xG:7.6, xA:8.4, keyPasses:70, tackles:0, interceptions:0} },
                { id: 24, name: 'Christian Pulisic', position: 'FW', age: 26, appearances: 50, goals: 17, assists: 11, value: 50.0, nationality: 'M·ªπ', contractUntil: '2027', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Pulisic', stats: {goals: 17, assists: 11, xG:12.0, xA:6.4, keyPasses:60, tackles:0, interceptions:0} },
                { id: 25, name: 'Samuel Chukwueze', position: 'FW', age: 26, appearances: 36, goals: 5, assists: 0, value: 14.0, nationality: 'Nigeria', contractUntil: '2028', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Chukwueze', stats: {goals: 5, assists: 0, xG:4.5, xA:1.5, keyPasses:25, tackles:0, interceptions:0} },
                { id: 26, name: 'Francesco Camarda', position: 'FW', age: 17, appearances: 14, goals: 0, assists: 0, value: 10.0, nationality: '√ù', contractUntil: '2027', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Camarda', stats: {goals: 0, assists: 0, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
                { id: 27, name: 'Bob Murphy Omoregbe', position: 'FW', age: 21, appearances: 1, goals: 0, assists: 0, value: 0.2, nationality: '√ù', contractUntil: '2025', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Omoregbe', stats: {goals: 0, assists: 0, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
                { id: 28, name: 'Jo√£o F√©lix', position: 'FW', age: 25, appearances: 21, goals: 3, assists: 0, value: 25.0, nationality: 'B·ªì ƒê√†o Nha', contractUntil: '2025', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Felix', note: 'Cho m∆∞·ª£n (Chelsea)', stats: {goals: 3, assists: 0, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
                { id: 29, name: 'Tammy Abraham', position: 'FW', age: 27, appearances: 44, goals: 10, assists: 0, value: 15.0, nationality: 'Anh', contractUntil: '2025', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Abraham', note: 'Cho m∆∞·ª£n (Roma)', stats: {goals: 10, assists: 0, xG:12.5, xA:2.1, keyPasses:20, tackles:0, interceptions:0} },
                { id: 30, name: 'Riccardo Sottil', position: 'FW', age: 26, appearances: 8, goals: 0, assists: 0, value: 4.0, nationality: '√ù', contractUntil: '2025', photoUrl: 'https://placehold.co/150x150/DDDDDD/555555?text=Sottil', note: 'Cho m∆∞·ª£n (Fiorentina)', stats: {goals: 0, assists: 0, xG:0, xA:0, keyPasses:0, tackles:0, interceptions:0} },
            ],
            performance: {
                serieA: {
                    labels: ['M·ª•c ti√™u Top 4', 'AC Milan', 'Atalanta (Th·ª© 7)', 'Bologna (Th·ª© 6)'],
                    points: [71, 63, 69, 68]
                }
            },
            finance: {
                revenue: {
                    labels: ['Th∆∞∆°ng m·∫°i (44%)', 'B·∫£n quy·ªÅn TH (38%)', 'Ng√†y thi ƒë·∫•u (18%)'],
                    data: [174.9, 151.1, 71.6]
                }
            },
            management: [
                { name: 'Paolo Scaroni', role: 'Ch·ªß t·ªãch', affiliation: 'AC Milan' },
                { name: 'Giorgio Furlani', role: 'Gi√°m ƒë·ªëc ƒêi·ªÅu h√†nh (CEO)', affiliation: 'AC Milan (tr∆∞·ªõc ƒë√¢y thu·ªôc qu·ªπ Elliott)' },
                { name: 'Gerry Cardinale', role: 'Th√†nh vi√™n HƒêQT', affiliation: 'RedBird Capital Partners' },
                { name: 'Randy Levine', role: 'Th√†nh vi√™n HƒêQT', affiliation: 'RedBird Capital Partners' },
                { name: 'Mark Dowley', role: 'Th√†nh vi√™n HƒêQT', affiliation: 'RedBird Capital Partners' },
                { name: 'Robert Klein', role: 'Th√†nh vi√™n HƒêQT', affiliation: 'RedBird Capital Partners' },
                { name: 'David Castelblanco', role: 'Th√†nh vi√™n HƒêQT', affiliation: 'RedBird Capital Partners' },
                { name: 'Gordon Singer', role: 'Th√†nh vi√™n HƒêQT', affiliation: 'Elliott Management' },
                { name: 'Dominic Mitchell', role: 'Th√†nh vi√™n HƒêQT', affiliation: 'Elliott Management' },
                { name: 'Stefano Cocirio', role: 'Th√†nh vi√™n HƒêQT/Gi√°m ƒë·ªëc T√†i ch√≠nh (CFO)', affiliation: 'AC Milan (tr∆∞·ªõc ƒë√¢y thu·ªôc qu·ªπ Elliott)' },
                { name: 'Alfredo Craca', role: 'Th√†nh vi√™n HƒêQT', affiliation: 'AC Milan' },
                { name: 'Riccardo Stefanelli', role: 'Th√†nh vi√™n HƒêQT (ƒê·ªôc l·∫≠p)', affiliation: 'B·ªï nhi·ªám b·ªüi RedBird' },
                { name: 'Franco Baresi', role: 'Ph√≥ Ch·ªß t·ªãch Danh d·ª±', affiliation: 'AC Milan' },
                { name: 'Geoffrey Moncada', role: 'Gi√°m ƒë·ªëc K·ªπ thu·∫≠t', affiliation: 'AC Milan' },
                { name: 'Maikel Oettle', role: 'Gi√°m ƒë·ªëc Th∆∞∆°ng m·∫°i', affiliation: 'AC Milan' },
                { name: 'Francesca Montini', role: 'Gi√°m ƒë·ªëc Th∆∞∆°ng hi·ªáu', affiliation: 'AC Milan' }
            ]
        };

        let currentSort = { column: 'name', direction: 'asc' };
        let charts = {};

        function formatValue(value) {
            if (typeof value === 'number') return value.toFixed(1);
            return 'N/A';
        }
        
        function renderSquadTable(squadData) {
            const tableBody = document.getElementById('squad-table-body');
            tableBody.innerHTML = '';

            const sortedData = [...squadData].sort((a, b) => {
                let aVal = a[currentSort.column];
                let bVal = b[currentSort.column];
                
                if (typeof aVal === 'string') {
                    aVal = aVal.toLowerCase();
                    bVal = bVal.toLowerCase();
                } else if (typeof aVal === 'number' && typeof bVal === 'number') {
                    // standard number sort
                } else { // handle cases where one might be undefined or not a number
                    if (aVal === undefined || aVal === null) return currentSort.direction === 'asc' ? 1 : -1;
                    if (bVal === undefined || bVal === null) return currentSort.direction === 'asc' ? -1 : 1;
                }


                if (aVal < bVal) return currentSort.direction === 'asc' ? -1 : 1;
                if (aVal > bVal) return currentSort.direction === 'asc' ? 1 : -1;
                return 0;
            });
            
            sortedData.forEach(player => {
                const row = document.createElement('tr');
                row.className = 'bg-white border-b table-row-clickable';
                row.dataset.playerId = player.id;
                row.innerHTML = `
                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">
                        <div class="flex items-center">
                             <img src="${player.photoUrl || 'https://placehold.co/32x32/DDDDDD/555555?text=P'}" alt="${player.name}" class="w-8 h-8 rounded-full mr-3 object-cover">
                            <div>
                                ${player.name}
                                ${player.note ? `<span class="text-xs text-gray-500 block">${player.note}</span>` : ''}
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 hidden md:table-cell">${player.age}</td>
                    <td class="px-6 py-4">${player.appearances}</td>
                    <td class="px-6 py-4">${player.goals}</td>
                    <td class="px-6 py-4">${formatValue(player.value)}</td>
                `;
                tableBody.appendChild(row);
            });

            document.querySelectorAll('.table-row-clickable').forEach(row => {
                row.addEventListener('click', (e) => {
                    const playerId = e.currentTarget.dataset.playerId;
                    openPlayerModal(parseInt(playerId));
                });
            });
        }
        
        function openPlayerModal(playerId) {
            const player = AppData.squad.find(p => p.id === playerId);
            if (!player) return;

            const modal = document.getElementById('player-modal');
            const modalContent = modal.querySelector('.modal-content');
            const modalBody = document.getElementById('modal-body');
            document.getElementById('modal-player-name').textContent = player.name;
            
            let statsHtml;
            if (player.position === 'FW' || player.position === 'MF') {
                statsHtml = `
                    <div class="text-center font-semibold text-lg mb-2">Ch·ªâ s·ªë t·∫•n c√¥ng & s√°ng t·∫°o</div>
                    <div class="chart-container" style="height: 300px; max-height: 40vh;"><canvas id="playerRadarChart"></canvas></div>`;
            } else if (player.position === 'DF') {
                statsHtml = `
                    <div class="text-center font-semibold text-lg mb-2">Ch·ªâ s·ªë ph√≤ng ng·ª±</div>
                    <div class="chart-container" style="height: 300px; max-height: 40vh;"><canvas id="playerBarChart"></canvas></div>`;
            } else { // GK
                 statsHtml = `
                    <div class="text-center font-semibold text-lg mb-2">Th·ªëng k√™ th·ªß m√¥n</div>
                    <div class="p-4 bg-slate-100 rounded-lg text-center">
                         <h4 class="font-medium text-slate-500">S·ªë tr·∫≠n gi·ªØ s·∫°ch l∆∞·ªõi</h4>
                         <p class="text-4xl font-bold text-slate-800 mt-2">${player.stats.cleanSheets !== undefined ? player.stats.cleanSheets : 'N/A'}</p>
                    </div>`;
            }

            modalBody.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="md:col-span-1 flex flex-col items-center">
                        <img src="${player.photoUrl || 'https://placehold.co/150x150/DDDDDD/555555?text=Player'}" alt="${player.name}" class="w-40 h-40 rounded-full mb-4 object-cover border-4 border-slate-200">
                        <div class="bg-white p-4 rounded-lg shadow-sm w-full">
                            <h4 class="font-bold text-lg mb-2 text-center">Th√¥ng tin chung</h4>
                            <div class="space-y-1 text-sm">
                                <p><strong class="font-semibold text-slate-600 w-28 inline-block">V·ªã tr√≠:</strong> ${player.position}</p>
                                <p><strong class="font-semibold text-slate-600 w-28 inline-block">Tu·ªïi:</strong> ${player.age}</p>
                                <p><strong class="font-semibold text-slate-600 w-28 inline-block">Qu·ªëc t·ªãch:</strong> ${player.nationality}</p>
                                <p><strong class="font-semibold text-slate-600 w-28 inline-block">H·ª£p ƒë·ªìng:</strong> ${player.contractUntil}</p>
                                <p><strong class="font-semibold text-slate-600 w-28 inline-block">S·ªë tr·∫≠n:</strong> ${player.appearances}</p>
                                <p><strong class="font-semibold text-slate-600 w-28 inline-block">B√†n th·∫Øng:</strong> ${player.goals}</p>
                                <p><strong class="font-semibold text-slate-600 w-28 inline-block">Ki·∫øn t·∫°o:</strong> ${player.assists !== undefined ? player.assists : 'N/A'}</p>
                                <p><strong class="font-semibold text-slate-600 w-28 inline-block">Gi√° tr·ªã TT:</strong> ‚Ç¨${formatValue(player.value)}M</p>
                                ${player.note ? `<p><strong class="font-semibold text-slate-600 w-28 inline-block">Ghi ch√∫:</strong> ${player.note}</p>` : ''}
                            </div>
                        </div>
                    </div>
                    <div class="md:col-span-2 bg-white p-4 rounded-lg shadow-sm">
                         ${statsHtml}
                    </div>
                </div>
            `;

            modal.classList.remove('hidden');
            modal.classList.add('flex');
            setTimeout(() => {
                if (modal) modal.style.opacity = '1';
                if (modalContent) modalContent.style.transform = 'scale(1)';
            }, 10);
            
            if (charts.playerRadar) charts.playerRadar.destroy();
            if (charts.playerBar) charts.playerBar.destroy();
            
            const playerStats = player.stats || {};

            if (player.position === 'FW' || player.position === 'MF') {
                initPlayerRadarChart(player.name, playerStats);
            } else if (player.position === 'DF') {
                initPlayerBarChart(player.name, playerStats);
            }
        }

        function closeModal() {
            const modal = document.getElementById('player-modal');
            const modalContent = modal.querySelector('.modal-content');
            if (modal) modal.style.opacity = '0';
            if (modalContent) modalContent.style.transform = 'scale(0.95)';
            
            setTimeout(() => {
                if (modal) {
                    modal.classList.add('hidden');
                    modal.classList.remove('flex');
                }
            }, 300);
        }

        function initCharts() {
            Chart.defaults.font.family = 'Inter';
            Chart.defaults.color = '#334155';
            
            const serieAChartElement = document.getElementById('serieAChart');
            if (serieAChartElement) {
                if(charts.serieA) charts.serieA.destroy();
                const serieA_ctx = serieAChartElement.getContext('2d');
                charts.serieA = new Chart(serieA_ctx, {
                    type: 'bar',
                    data: {
                        labels: AppData.performance.serieA.labels,
                        datasets: [{
                            label: 'ƒêi·ªÉm s·ªë Serie A',
                            data: AppData.performance.serieA.points,
                            backgroundColor: [
                                'rgba(255, 159, 64, 0.5)',
                                'rgba(239, 68, 68, 0.5)',
                                'rgba(59, 130, 246, 0.5)',
                                'rgba(34, 197, 94, 0.5)',
                            ],
                            borderColor: [
                                'rgb(255, 159, 64)',
                                'rgb(239, 68, 68)',
                                'rgb(59, 130, 246)',
                                'rgb(34, 197, 94)',
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            title: { display: true, text: 'So s√°nh ƒëi·ªÉm s·ªë cu·ªëi m√πa' }
                        },
                        scales: { y: { beginAtZero: true, suggestedMax: 80 } }
                    }
                });
            }


            const revenueChartElement = document.getElementById('revenueChart');
            if (revenueChartElement) {
                if(charts.revenue) charts.revenue.destroy();
                const revenue_ctx = revenueChartElement.getContext('2d');
                charts.revenue = new Chart(revenue_ctx, {
                    type: 'doughnut',
                    data: {
                        labels: AppData.finance.revenue.labels,
                        datasets: [{
                            label: 'C∆° c·∫•u doanh thu (‚Ç¨M)',
                            data: AppData.finance.revenue.data,
                            backgroundColor: [
                                'rgba(239, 68, 68, 0.7)',
                                'rgba(59, 130, 246, 0.7)',
                                'rgba(245, 158, 11, 0.7)',
                            ],
                            hoverOffset: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'top' },
                            title: { display: true, text: 'C∆° c·∫•u doanh thu 2023-2024' }
                        }
                    }
                });
            }
        }
        
        function initPlayerRadarChart(playerName, playerStats) {
            const ctx = document.getElementById('playerRadarChart').getContext('2d');
            const dataValues = [
                playerStats.goals || 0, 
                playerStats.assists || 0, 
                playerStats.xG || 0, 
                playerStats.xA || 0,
                (playerStats.keyPasses || 0) > 100 ? (playerStats.keyPasses / 10) : ((playerStats.keyPasses || 0) / 5)
            ];

            charts.playerRadar = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['B√†n th·∫Øng', 'Ki·∫øn t·∫°o', 'xG', 'xA', 'Ch. Quy·∫øt ƒë·ªãnh (scaled)'],
                    datasets: [{
                        label: playerName,
                        data: dataValues,
                        fill: true,
                        backgroundColor: 'rgba(239, 68, 68, 0.2)',
                        borderColor: 'rgb(239, 68, 68)',
                        pointBackgroundColor: 'rgb(239, 68, 68)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(239, 68, 68)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    elements: { line: { tension: 0, borderWidth: 3 } },
                    scales: { r: { angleLines: { display: true }, suggestMin: 0, ticks: { display: true, backdropPadding:0, stepSize: Math.max(...dataValues) > 10 ? 5 : 2 } } },
                    plugins: { legend: { display: false } }
                }
            });
        }

        function initPlayerBarChart(playerName, playerStats) {
             const ctx = document.getElementById('playerBarChart').getContext('2d');
             charts.playerBar = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['T·∫Øc b√≥ng', 'C·∫Øt b√≥ng', 'xA (scaled)'],
                    datasets: [{
                        label: 'Ch·ªâ s·ªë ph√≤ng ng·ª±',
                        data: [playerStats.tackles || 0, playerStats.interceptions || 0, (playerStats.xA || 0) * 10],
                        backgroundColor: 'rgba(59, 130, 246, 0.5)',
                        borderColor: 'rgb(59, 130, 246)',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { x: { beginAtZero: true } }
                }
            });
        }
        
        function renderManagementTable() {
            const tableBody = document.getElementById('management-table-body');
            if (!tableBody) return;
            tableBody.innerHTML = '';
            AppData.management.forEach(member => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${member.name}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${member.role}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${member.affiliation}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.app-section');
            const mobileNav = document.getElementById('mobile-nav');

            function switchTab(targetId) {
                sections.forEach(section => {
                    if (section.id === targetId) {
                        section.classList.remove('hidden');
                    } else {
                        section.classList.add('hidden');
                    }
                });
                
                navLinks.forEach(link => {
                    if(link.dataset.target === targetId){
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
                
                if (targetId === 'performance' || targetId === 'off-pitch') {
                   initCharts(); 
                }
                if (targetId === 'off-pitch') {
                    renderManagementTable();
                }
                
                mobileNav.value = targetId; 
                window.scrollTo(0, 0); 
            }
            
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    switchTab(e.target.dataset.target);
                });
            });

            mobileNav.addEventListener('change', (e) => {
                switchTab(e.target.value);
            });

            document.getElementById('position-filter').addEventListener('change', (e) => {
                const position = e.target.value;
                const nameQuery = document.getElementById('name-search').value.toLowerCase();
                let filteredData = AppData.squad;

                if (position !== 'all') {
                    filteredData = filteredData.filter(p => p.position === position);
                }
                if (nameQuery) {
                    filteredData = filteredData.filter(p => p.name.toLowerCase().includes(nameQuery));
                }
                
                renderSquadTable(filteredData);
            });

             document.getElementById('name-search').addEventListener('input', (e) => {
                const nameQuery = e.target.value.toLowerCase();
                const position = document.getElementById('position-filter').value;
                let filteredData = AppData.squad;

                if (position !== 'all') {
                    filteredData = filteredData.filter(p => p.position === position);
                }
                if (nameQuery) {
                    filteredData = filteredData.filter(p => p.name.toLowerCase().includes(nameQuery));
                }
                
                renderSquadTable(filteredData);
            });
            
            document.querySelectorAll('.table-header-sortable').forEach(header => {
                header.addEventListener('click', (e) => {
                    const column = e.currentTarget.dataset.sort;
                    if(currentSort.column === column) {
                        currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
                    } else {
                        currentSort.column = column;
                        currentSort.direction = 'asc';
                    }
                    const position = document.getElementById('position-filter').value;
                    const nameQuery = document.getElementById('name-search').value.toLowerCase();
                    let filteredData = AppData.squad;
                    if (position !== 'all') {
                         filteredData = filteredData.filter(p => p.position === position);
                    }
                     if (nameQuery) {
                        filteredData = filteredData.filter(p => p.name.toLowerCase().includes(nameQuery));
                    }
                    renderSquadTable(filteredData);
                });
            });

            document.getElementById('close-modal-btn').addEventListener('click', closeModal);
            document.getElementById('player-modal').addEventListener('click', (e) => {
                if(e.target === e.currentTarget) {
                    closeModal();
                }
            });

            switchTab('overview'); 
            renderSquadTable(AppData.squad); 
            if (navLinks.length > 0) navLinks[0].classList.add('active'); 
        });
    </script>
</body>
</html>
